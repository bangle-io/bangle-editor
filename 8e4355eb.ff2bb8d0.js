(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{156:function(e,t,o){"use strict";o.d(t,"a",(function(){return p})),o.d(t,"b",(function(){return m}));var n=o(0),r=o.n(n);function a(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){a(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var d=r.a.createContext({}),l=function(e){var t=r.a.useContext(d),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},p=function(e){var t=l(e.components);return r.a.createElement(d.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},h=r.a.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(o),h=n,m=p["".concat(c,".").concat(h)]||p[h]||b[h]||a;return o?r.a.createElement(m,i(i({ref:t},d),{},{components:o})):r.a.createElement(m,i({ref:t},d))}));function m(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,c=new Array(a);c[0]=h;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:n,c[1]=i;for(var d=2;d<a;d++)c[d]=o[d];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,o)}h.displayName="MDXCreateElement"},96:function(e,t,o){"use strict";o.r(t),o.d(t,"frontMatter",(function(){return c})),o.d(t,"metadata",(function(){return i})),o.d(t,"rightToc",(function(){return s})),o.d(t,"default",(function(){return l}));var n=o(3),r=o(7),a=(o(0),o(156)),c={title:"How do I?",sidebar_label:"How do I?"},i={unversionedId:"guides/how-do-i",id:"guides/how-do-i",isDocsHomePage:!1,title:"How do I?",description:"In this page we answer a list of commonly asked things",source:"@site/docs/guides/how-do-i.md",slug:"/guides/how-do-i",permalink:"/docs/guides/how-do-i",editUrl:"https://github.com/bangle-io/bangle.dev/edit/master/_bangle-website/docs/guides/how-do-i.md",version:"current",sidebar_label:"How do I?",sidebar:"docs",previous:{title:"Keybindings",permalink:"/docs/guides/keybindings"},next:{title:"@bangle.dev/core",permalink:"/docs/api/core"}},s=[{value:"How do I watch for changes to the editor?",id:"how-do-i-watch-for-changes-to-the-editor",children:[]},{value:"How do I handle editor&#39;s DOM events ?",id:"how-do-i-handle-editors-dom-events-",children:[]},{value:"How do I add a keyboard shortcut ?",id:"how-do-i-add-a-keyboard-shortcut-",children:[]},{value:"How do I execute a command ?",id:"how-do-i-execute-a-command-",children:[]},{value:"How do I get access to the <code>view</code>, <code>state</code>, <code>dispatch</code> for a command?",id:"how-do-i-get-access-to-the-view-state-dispatch-for-a-command",children:[]},{value:"How do I get access to Prosemirror schema ?",id:"how-do-i-get-access-to-prosemirror-schema-",children:[]},{value:"How do I access <code>prosemirror-*</code> module ?",id:"how-do-i-access-prosemirror--module-",children:[]},{value:"How do I change the selection ?",id:"how-do-i-change-the-selection-",children:[]},{value:"How do I programmatically update the doc content?",id:"how-do-i-programmatically-update-the-doc-content",children:[]},{value:"How do I create a new paragraph node ?",id:"how-do-i-create-a-new-paragraph-node-",children:[]}],d={rightToc:s};function l(e){var t=e.components,o=Object(r.a)(e,["components"]);return Object(a.b)("wrapper",Object(n.a)({},d,o,{components:t,mdxType:"MDXLayout"}),Object(a.b)("p",null,"In this page we answer a list of commonly asked things"),Object(a.b)("h3",{id:"how-do-i-watch-for-changes-to-the-editor"},"How do I watch for changes to the editor?"),Object(a.b)("p",null,"Create a plugin that watches changes to the editor, see ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/examples/exporting-data"}),"exporting data")," for an example."),Object(a.b)("h3",{id:"how-do-i-handle-editors-dom-events-"},"How do I handle editor's DOM events ?"),Object(a.b)("p",null,"Create a plugin which listens to DOM events as show below:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"new Plugin({\n  key: new PluginKey('myDropPlugin'),\n  props: {\n    handleDOMEvents: {\n      drop(view, event) {\n        // your logic\n      },\n    },\n  },\n});\n")),Object(a.b)("p",null,"\ud83d\udca1 See ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://prosemirror.net/docs/ref/#view.EditorProps"}),"Prosemirror.EditorProps")," for the API."),Object(a.b)("h3",{id:"how-do-i-add-a-keyboard-shortcut-"},"How do I add a keyboard shortcut ?"),Object(a.b)("p",null,"\ud83d\udcd6 See ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/guides/keybindings"}),"Keybindings Guide")),Object(a.b)("h3",{id:"how-do-i-execute-a-command-"},"How do I execute a command ?"),Object(a.b)("p",null,"If you are using the vanilla setup, you can get access to ",Object(a.b)("inlineCode",{parentName:"p"},"view")," from the ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/api/core#bangleeditor"}),"editor")," instance. For example"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const editor =  new BangleEditor({ ... })\nconst view = editor.view\nconst state = view.state\nconst dispatch = view.dispatch\n\n// dry run a command\nconst success = toggleBold()(view.state);\n// execute the command\ntoggleBold()(view.state, view.dispatch, view);\n")),Object(a.b)("p",null,"In a React setup you can get the ",Object(a.b)("inlineCode",{parentName:"p"},"view")," from the hook ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/api/react#useeditorviewcontext-reacthook"}),"useEditorViewContext")," for components rendered inside the ",Object(a.b)("inlineCode",{parentName:"p"},"<BangleEditor />"),". For components\noutside ",Object(a.b)("inlineCode",{parentName:"p"},"<BangleEditor />"),", save the ",Object(a.b)("inlineCode",{parentName:"p"},"editor")," in your applications state management for retrieval and access. Don't forget to clean it up when your editor is destroyed."),Object(a.b)("h3",{id:"how-do-i-get-access-to-the-view-state-dispatch-for-a-command"},"How do I get access to the ",Object(a.b)("inlineCode",{parentName:"h3"},"view"),", ",Object(a.b)("inlineCode",{parentName:"h3"},"state"),", ",Object(a.b)("inlineCode",{parentName:"h3"},"dispatch")," for a command?"),Object(a.b)("p",null,"See ",Object(a.b)("inlineCode",{parentName:"p"},"### How do I execute a command ?")," above."),Object(a.b)("h3",{id:"how-do-i-get-access-to-prosemirror-schema-"},"How do I get access to Prosemirror schema ?"),Object(a.b)("p",null,"If you are using ",Object(a.b)("inlineCode",{parentName:"p"},"specs:[ ... ]")," notation, switch to using ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/api/core#specregistry"}),"SpecRegistry"),"."),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const specRegistry = new SpecRegistry([]);\nconst schema = specRegistry.schema;\n")),Object(a.b)("h3",{id:"how-do-i-access-prosemirror--module-"},"How do I access ",Object(a.b)("inlineCode",{parentName:"h3"},"prosemirror-*")," module ?"),Object(a.b)("p",null,"You can either npm install them:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{}),"npm i -S prosemirror-view prosemirror-state\n")),Object(a.b)("p",null,"or use the ones provided in bangle core which follow the path of ",Object(a.b)("inlineCode",{parentName:"p"},"@bangle.dev/core/prosemirror/<name_of_module>"),":"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"import { EditorView } from '@bangle.dev/core/prosemirror/view';\nimport { TextSelection } from '@bangle.dev/core/prosemirror/state';\nimport { Slice } from '@bangle.dev/core/prosemirror/model';\n")),Object(a.b)("p",null,"I recommend the later approach to avoid problems with different versions of Prosemirror existing in your application."),Object(a.b)("h3",{id:"how-do-i-change-the-selection-"},"How do I change the selection ?"),Object(a.b)("p",null,"First, you will need to figure out whether you want a ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://prosemirror.net/docs/ref/#state.TextSelection"}),"TextSelection")," (majority of the cases) or a ",Object(a.b)("a",Object(n.a)({parentName:"p"},{href:"https://prosemirror.net/docs/ref/#state.NodeSelection"}),"NodeSelection"),". Below is an example of setting selection to the end:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const setSelectionAtEnd = (state, dispatch) => {\n  const textSelection = TextSelection.create(\n    state.doc,\n    state.doc.content.size - 1,\n  );\n  // doing this creates a new Transaction\n  const tr = state.tr;\n  // this convention allows for dry running of a command\n  if (dispatch) {\n    dispatch(tr.setSelection(textSelection));\n  }\n  // return the success of the command\n  return true;\n};\n")),Object(a.b)("h3",{id:"how-do-i-programmatically-update-the-doc-content"},"How do I programmatically update the doc content?"),Object(a.b)("p",null,"This is a pretty heavy question as this requires Prosemirror knowledge of dealing with ",Object(a.b)("inlineCode",{parentName:"p"},"transactions"),". To get started read up on"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"Read the ",Object(a.b)("a",Object(n.a)({parentName:"li"},{href:"https://prosemirror.net/docs/guide/#transform"}),"Prosemirror guide")," at least 3 times."),Object(a.b)("li",{parentName:"ul"},"Browse the source code of some of your favourite components to get a hang of\ncarrying out transactions."),Object(a.b)("li",{parentName:"ul"},"Checkout ",Object(a.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/atlassian/prosemirror-utils"}),"prosemirror-utils")," for more code examples.")),Object(a.b)("h3",{id:"how-do-i-create-a-new-paragraph-node-"},"How do I create a new paragraph node ?"),Object(a.b)("p",null,"Below is an example of how you can create a new paragraph node:"),Object(a.b)("pre",null,Object(a.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const { doc, schema, tr } = view.state;\nconst type = schema.nodes.paragraph;\n// Insert a paragraph node at the end of document.\nconst transaction = tr.insert(doc.content.size, type.create('Hello'));\n// Commit it.\nview.dispatch(transaction);\n")))}l.isMDXComponent=!0}}]);