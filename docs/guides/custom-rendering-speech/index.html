<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.69">
<link rel="search" type="application/opensearchdescription+xml" title="bangle.dev" href="/opensearch.xml"><title data-react-helmet="true">Custom Rendering | bangle.dev</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Custom Rendering | bangle.dev"><meta data-react-helmet="true" name="description" content="Up untill this point you might be wondering what is the best way if you want"><meta data-react-helmet="true" property="og:description" content="Up untill this point you might be wondering what is the best way if you want"><meta data-react-helmet="true" property="og:url" content="https://bangle.dev/docs/guides/custom-rendering-speech"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://bangle.dev/docs/guides/custom-rendering-speech"><link rel="stylesheet" href="/styles.45d0cc3d.css">
<link rel="preload" href="/styles.d03a2d17.js" as="script">
<link rel="preload" href="/runtime~main.8f601873.js" as="script">
<link rel="preload" href="/main.261f9e22.js" as="script">
<link rel="preload" href="/1.98e68b9d.js" as="script">
<link rel="preload" href="/3.5ad4faeb.js" as="script">
<link rel="preload" href="/1be78505.0da885c4.js" as="script">
<link rel="preload" href="/935f2afb.91927ac3.js" as="script">
<link rel="preload" href="/68.f899eeec.js" as="script">
<link rel="preload" href="/2.01fabd5a.js" as="script">
<link rel="preload" href="/30a338ca.ae4e0743.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2hKy">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="bangle.dev Logo" class="themedImage_6-74 themedImage--light_BFeb navbar__logo"><img src="/img/logo.png" alt="bangle.dev Logo" class="themedImage_6-74 themedImage--dark_wcG5 navbar__logo"><strong class="navbar__title">bangle.dev (beta)</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/community/">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bangle-io/bangle.dev" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1aOH"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3mGY">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3mGY">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">⌘</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="bangle.dev Logo" class="themedImage_6-74 themedImage--light_BFeb navbar__logo"><img src="/img/logo.png" alt="bangle.dev Logo" class="themedImage_6-74 themedImage--dark_wcG5 navbar__logo"><strong class="navbar__title">bangle.dev (beta)</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/community/">Community</a></li><li class="menu__list-item"><a href="https://github.com/bangle-io/bangle.dev" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2v3d"><div class="docSidebarContainer_3MB-" role="complementary"><div class="sidebar_2YnN"><div class="menu menu--responsive thin-scrollbar menu_2T8D"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1-iz" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Hello ☺️</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/markdown-editor">Markdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/todo-list">Lists &amp; TodoLists</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/images">Images</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/exporting-data">Exporting Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/placeholder">Placeholder</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/text-formatting">Text Formatting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/collapsible">Collapsible Headings</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">React Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/react-basic-editor">Basic Editor in React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/react-floating-menu">Floating Menu</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/react-static-menu">Static Menu</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/examples/react-emoji-suggest">Emoji Suggestions🤔</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/first-editor">Your first Bangle Editor</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/guides/custom-rendering-speech">Custom Rendering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/commands">Commands and Interactivty</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/keybindings">Keybindings</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/how-do-i">How do I?</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/core">@bangle.dev/core</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/emoji">@bangle.dev/emoji</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/react">@bangle.dev/react</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/react_emoji_suggest">@bangle.dev/react-emoji-suggest</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/react_menu">@bangle.dev/react-menu</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/text_formatting">@bangle.dev/text-formatting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/collab_client">(wip) @bangle.dev/collab-client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/markdown">(wip) @bangle.dev/markdown</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/markdown_front_matter">(wip) @bangle.dev/markdown-front-matter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/table">(wip) @bangle.dev/table</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/api/tooltip">(wip) @bangle.dev/tooltip</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3a03"><div class="container padding-vert--lg docItemWrapper_3UqF"><div class="row"><div class="col docItemCol_2sn3"><div class="docItemContainer_2GvP"><article><header><h1 class="docTitle_zCOn">Custom Rendering</h1></header><div class="markdown"><p>Up untill this point you might be wondering what is the best way if you want
to change the way a particular node is rendered in the browser. Bangle provides you with few options</p><ul><li>The simplest option is to look at the <code>style.css</code> of a component and override it with your own.</li><li>If you only care about the HTML semantics you can modify the
<a href="https://prosemirror.net/docs/ref/#model.NodeSpec.toDOM">toDOM</a> and <a href="https://prosemirror.net/docs/ref/#model.NodeSpec.parseDOM">parseDOM</a>
in your <a href="/docs/api/core#spec">spec.schema</a>. Checkout this cute Prosemirror <a href="https://prosemirror.net/examples/dino/">example</a> for details.</li><li>If you want all the bells and whistles read on 😎!</li></ul><p>In this guide we will create a component that speaks the words written inside of it with the help of the NodeView API.</p><p>Below is the finished product:</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_2fXq tabs__item--active">Example</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_2fXq">Source code</li></ul><div class="margin-vert--md"><div role="tabpanel"></div><div role="tabpanel" hidden="">loading...</div></div></div><h3 id="spec">Spec</h3><p>We create a spec named <code>speech</code> having the following fields:</p><pre><code class="language-js">{
  type: &#x27;node&#x27;,
  name: &#x27;speech&#x27;,
  schema: {
    content: &#x27;inline*&#x27;,
    group: &#x27;block&#x27;,
    draggable: false,
    toDOM,
    parseDOM,
  },
}
</code></pre><p>The schema defines that this component can have 0 or more content of group <code>inline</code>.</p><p>Next we define the <code>toDOM</code> and <code>parseDOM</code> fields of the schema. They control how editor serializes and parses
your node. For node views, these fields dictate the exporting of HTML, copy pasting and dragging.</p><pre><code class="language-js">const { toDOM, parseDOM } = domSerializationHelpers(name, {
  tag: &#x27;div&#x27;,
  content: 0,
});
</code></pre><p>💡 <code>&#x27;0&#x27;</code> in Prosemirror world is what <code>props.children</code> is in React i.e. dom content can be put in it. See <a href="https://prosemirror.net/docs/ref/#model.DOMOutputSpec">Proseemirror.DOMOutputSpec</a> for more details</p><p>Since we donot really care about the semantics of the output, we use the helper function <code>domSerializationHelpers</code>
which generates a good enough pair of <code>toDOM</code> and <code>parseDOM</code>.</p><p>📖 Read the <a href="https://prosemirror.net/docs/guide/#schema">Prosemirror.Schema</a> guide if you want to dig deeper on what each of the fields in the schema mean.</p><h3 id="plugins">Plugins</h3><pre><code class="language-js">plugins() {
  return [
    keymap({
      &#x27;Ctrl-d&#x27;: createSpeechNode(),
    }),
    ...
  ];
}
</code></pre><p>In the plugins, we define a keyboard shortcut which allows us to create a new speech node whenever
user presses <code>Ctrl-d</code>. Here, <code>createSpeechNode()</code> is a command which will insert a new <code>speech</code> node for us.</p><pre><code class="language-html">&lt;DOC&gt;
  || EDITOR LAND ||
  &lt;containerDOM&gt;
    || YOUR LAND ||
    &lt;contentDOM&gt; || EDITOR LAND || &lt;/contentDOM&gt;
  &lt;/containerDOM&gt;
  || EDITOR LAND ||
&lt;/DOC&gt;
</code></pre><h2 id="rendering">Rendering</h2><p>Fully aborbing the visualization above, we create a React component:</p><pre><code class="language-jsx">&lt;div&gt;
  &lt;div className=&quot;your-land&quot; contentEditable={false}&gt;
    &lt;select
      onChange={(e) =&gt; {
        setLang(e.target.value);
      }}
    &gt;
      &lt;option&gt;some option&lt;/option&gt;
    &lt;/select&gt;
    &lt;button onClick={onPlay}&gt;Play&lt;/button&gt;
  &lt;/div&gt;
  {children}
&lt;/div&gt;
</code></pre><p>We put all our customization under the div <code>.your-land</code>. Bangle will automatically insert <code>contentDOM</code> in the <code>children</code> to allow for typing in our speech component.</p><p>As you notice we have marked just a part of the UI as <code>contentEditable=false</code>, this
tells the browser that unlike the rest, this content is not meant to be editable.</p><p>💡 When creating NodeView UI make sure that all the dom
ancestors of <code>{children}</code> are free of <code>contentEditable=true</code> or <code>contentEditable=false</code>. This helps prevent
<code>contentEditable</code> islands, which hamper the free flow of the cursor in your document. Like the example above, tuck
all the custom UI in a single <code>div</code> or <code>span</code>.</p><pre><code class="language-jsx">// 🚫 donot do this as it creates `contentEditable` islands
&lt;div contentEditable={true}&gt;
  &lt;div className=&quot;your-land&quot; contentEditable={false}&gt;
    &lt;button onClick={onPlay}&gt;Play&lt;/button&gt;
  &lt;/div&gt;
  {children}
&lt;/div&gt;

// 🚫 donot do this as it creates `contentEditable` islands
&lt;div contentEditable={true}&gt;
  &lt;div className=&quot;your-land&quot; contentEditable={false}&gt;
    &lt;button onClick={onPlay}&gt;Play&lt;/button&gt;
    &lt;div contentEditable={true}&gt;
      {children}
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

// 👍 this is good
&lt;div&gt;
  &lt;div className=&quot;your-land&quot; contentEditable={false}&gt;
    &lt;button onClick={onPlay}&gt;Play&lt;/button&gt;
  &lt;/div&gt;
  &lt;div&gt;
   {children}
  &lt;/div&gt;
&lt;/div&gt;
</code></pre><h3 id="wiring-it-all-up">Wiring it all up</h3><p>In your React component we expect a render prop which will be called whenever
there is an update for any of your node view and based on the type of your node
you can decide what component to render.</p><pre><code class="language-jsx">&lt;BangleEditor
  state={editorState}
  renderNodeViews={({ node, updateAttrs, children }) =&gt; {
    if (node.type.name === &#x27;speech&#x27;) {
      return (
        &lt;Speech node={node} updateAttrs={updateAttrs}&gt;
          {children}
        &lt;/Speech&gt;
      );
    }
  }}
/&gt;
</code></pre><p>In the second plugin, we tell Bangle to use a NodeView plugin for rendering the <code>speech</code> node. With this
we are on our own on deciding the rendering of this node.</p><p>The <code>contentDOM</code> and <code>containerDOM</code> are names you will hear often in the docs:</p><ul><li><p><code>contentDOM</code>: Is the dom node which will be the parent of the content. As you know, in our spec
we defined our node to have any content which is of the group <code>inline</code>. So anything that you type
in the speech node, will be directly housed by this dom node.</p></li><li><p><code>containerDOM</code>: This is the outermost node of <code>speech</code> node.</p></li></ul><p>The bangle editor will directly interface with these two nodes and leave the things in between for you.
You can visualize this relationship something like this,
where you only control the part demarcated as <code>YOUR LAND</code>.</p><pre><code class="language-js">NodeView.createPlugin({
  name: &#x27;speech&#x27;,
  // The speech component will be mounted on this
  containerDOM: [&#x27;div&#x27;, { class: &#x27;speech-container&#x27; }],
  // The dom.Node which Bangle will control to allow for typing of things to speak.
  contentDOM: [&#x27;span&#x27;, { class: &#x27;speech-text&#x27; }],
});
</code></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/bangle-io/bangle.dev/edit/master/_bangle-website/docs/guides/custom-rendering-speech.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guides/first-editor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Your first Bangle Editor</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/guides/commands"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Commands »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_326w thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#spec" class="table-of-contents__link">Spec</a></li><li><a href="#plugins" class="table-of-contents__link">Plugins</a></li><li><a href="#rendering" class="table-of-contents__link">Rendering</a><ul><li><a href="#wiring-it-all-up" class="table-of-contents__link">Wiring it all up</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/api/core">API</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/examples/markdown-editor">Examples</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/hFPnbPy8nK" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/kushan2020" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://github.com/bangle-io/bangle.dev" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Bangle.dev, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.d03a2d17.js"></script>
<script src="/runtime~main.8f601873.js"></script>
<script src="/main.261f9e22.js"></script>
<script src="/1.98e68b9d.js"></script>
<script src="/3.5ad4faeb.js"></script>
<script src="/1be78505.0da885c4.js"></script>
<script src="/935f2afb.91927ac3.js"></script>
<script src="/68.f899eeec.js"></script>
<script src="/2.01fabd5a.js"></script>
<script src="/30a338ca.ae4e0743.js"></script>
</body>
</html>