(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{131:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return w})),n.d(t,"metadata",(function(){return k})),n.d(t,"rightToc",(function(){return j})),n.d(t,"default",(function(){return C}));var r=n(3),o=n(7),a=n(0),i=n.n(a),c=n(155),s=n.p+"ce9efa962fec6d729c78764f35518be4.jsx",u=(n(53),n(191)),d=n(167),l=n(164),f=n(143),p=n(154),m=n(156),h=function(){var e=Object(d.a)("speech",{tag:"div",content:0});return{type:"node",name:"speech",schema:{content:"inline*",group:"block",draggable:!1,toDOM:e.toDOM,parseDOM:e.parseDOM}}},b=function(){return[Object(p.b)({"Ctrl-d":v()}),m.c.createPlugin({name:"speech",containerDOM:["div",{class:"speech-container"}],contentDOM:["span",{class:"speech-text"}]})]};function g(){var e=Object(u.c)({specs:[].concat(Object(l.b)(),[h()]),plugins:function(){return[].concat(Object(l.a)(),[b()])},initialValue:{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:"Let us play some sound \ud83c\udfb6"}]},{type:"speech",content:[{type:"text",text:"I am a robot"}]},{type:"paragraph",content:[{type:"text",text:"Press Ctrl-d to create more nodes"}]}]}});return i.a.createElement(u.a,{state:e,renderNodeViews:function(e){var t=e.node,n=e.updateAttrs,r=e.children;if("speech"===t.type.name)return i.a.createElement(y,{node:t,updateAttrs:n},r)}})}function v(e){return void 0===e&&(e="Hello !"),function(t,n){var r=t.schema.nodes.speech.createChecked(void 0,t.schema.text(e)),o=Object(f.q)(r,t.selection.from)(t.tr);return n&&n(o),!0}}function y(e){var t=e.node,n=e.children,r=Object(a.useState)(""),o=r[0],c=r[1],s=Object(a.useState)(speechSynthesis.getVoices()),u=s[0],d=s[1];return Object(a.useEffect)((function(){speechSynthesis.addEventListener&&speechSynthesis.addEventListener("voiceschanged",(function(){d(speechSynthesis.getVoices())}))}),[]),i.a.createElement("div",{style:{backgroundColor:"lightsteelblue",borderRadius:4,margin:"0.5rem 1rem",padding:"0.5rem 1rem"}},i.a.createElement("div",{className:"your-land",contentEditable:!1,style:{userSelect:"none"}},i.a.createElement("select",{value:o,onChange:function(e){c(e.target.value)}},u.map((function(e){return i.a.createElement("option",{key:e.name,value:e.lang},e.name," (",e.lang,")")}))),i.a.createElement("button",{type:"button",onClick:function(){window.speechSynthesis.cancel();var e=new SpeechSynthesisUtterance(t.textContent);e.lang=o,speechSynthesis.speak(e)}},"Play")),n)}var O=n(196),w={title:"Custom Rendering"},k={unversionedId:"guides/custom-rendering-speech",id:"guides/custom-rendering-speech",isDocsHomePage:!1,title:"Custom Rendering",description:"Up untill this point you might be wondering what is the best way if you want",source:"@site/docs/guides/custom-rendering-speech.mdx",slug:"/guides/custom-rendering-speech",permalink:"/docs/guides/custom-rendering-speech",editUrl:"https://github.com/bangle-io/bangle.dev/edit/master/_bangle-website/docs/guides/custom-rendering-speech.mdx",version:"current",sidebar:"docs",previous:{title:"Your first Bangle Editor",permalink:"/docs/guides/first-editor"},next:{title:"Commands",permalink:"/docs/guides/commands"}},j=[{value:"Spec",id:"spec",children:[]},{value:"Plugins",id:"plugins",children:[]},{value:"Rendering",id:"rendering",children:[{value:"Wiring it all up",id:"wiring-it-all-up",children:[]}]}],x={rightToc:j};function C(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(c.b)("wrapper",Object(r.a)({},x,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("p",null,"Up untill this point you might be wondering what is the best way if you want\nto change the way a particular node is rendered in the browser. Bangle provides you with few options"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},"The simplest option is to look at the ",Object(c.b)("inlineCode",{parentName:"li"},"style.css")," of a component and override it with your own."),Object(c.b)("li",{parentName:"ul"},"If you only care about the HTML semantics you can modify the\n",Object(c.b)("a",Object(r.a)({parentName:"li"},{href:"https://prosemirror.net/docs/ref/#model.NodeSpec.toDOM"}),"toDOM")," and ",Object(c.b)("a",Object(r.a)({parentName:"li"},{href:"https://prosemirror.net/docs/ref/#model.NodeSpec.parseDOM"}),"parseDOM"),"\nin your ",Object(c.b)("a",Object(r.a)({parentName:"li"},{href:"/docs/api/core#spec"}),"spec.schema"),". Checkout this cute Prosemirror ",Object(c.b)("a",Object(r.a)({parentName:"li"},{href:"https://prosemirror.net/examples/dino/"}),"example")," for details."),Object(c.b)("li",{parentName:"ul"},"If you want all the bells and whistles read on \ud83d\ude0e!")),Object(c.b)("p",null,"In this guide we will create a component that speaks the words written inside of it with the help of the NodeView API."),Object(c.b)("p",null,"Below is the finished product:"),Object(c.b)(O.a,{filePath:s,language:"jsx",component:function(){return Object(c.b)(g,{mdxType:"Component"})},mdxType:"ReactCodeExample"}),Object(c.b)("h3",{id:"spec"},"Spec"),Object(c.b)("p",null,"We create a spec named ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," having the following fields:"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"{\n  type: 'node',\n  name: 'speech',\n  schema: {\n    content: 'inline*',\n    group: 'block',\n    draggable: false,\n    toDOM,\n    parseDOM,\n  },\n}\n")),Object(c.b)("p",null,"The schema defines that this component can have 0 or more content of group ",Object(c.b)("inlineCode",{parentName:"p"},"inline"),"."),Object(c.b)("p",null,"Next we define the ",Object(c.b)("inlineCode",{parentName:"p"},"toDOM")," and ",Object(c.b)("inlineCode",{parentName:"p"},"parseDOM")," fields of the schema. They control how editor serializes and parses\nyour node. For node views, these fields dictate the exporting of HTML, copy pasting and dragging."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"const { toDOM, parseDOM } = domSerializationHelpers(name, {\n  tag: 'div',\n  content: 0,\n});\n")),Object(c.b)("p",null,"\ud83d\udca1 ",Object(c.b)("inlineCode",{parentName:"p"},"'0'")," in Prosemirror world is what ",Object(c.b)("inlineCode",{parentName:"p"},"props.children")," is in React i.e. dom content can be put in it. See ",Object(c.b)("a",Object(r.a)({parentName:"p"},{href:"https://prosemirror.net/docs/ref/#model.DOMOutputSpec"}),"Proseemirror.DOMOutputSpec")," for more details"),Object(c.b)("p",null,"Since we donot really care about the semantics of the output, we use the helper function ",Object(c.b)("inlineCode",{parentName:"p"},"domSerializationHelpers"),"\nwhich generates a good enough pair of ",Object(c.b)("inlineCode",{parentName:"p"},"toDOM")," and ",Object(c.b)("inlineCode",{parentName:"p"},"parseDOM"),"."),Object(c.b)("p",null,"\ud83d\udcd6 Read the ",Object(c.b)("a",Object(r.a)({parentName:"p"},{href:"https://prosemirror.net/docs/guide/#schema"}),"Prosemirror.Schema")," guide if you want to dig deeper on what each of the fields in the schema mean."),Object(c.b)("h3",{id:"plugins"},"Plugins"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"plugins() {\n  return [\n    keymap({\n      'Ctrl-d': createSpeechNode(),\n    }),\n    ...\n  ];\n}\n")),Object(c.b)("p",null,"In the plugins, we define a keyboard shortcut which allows us to create a new speech node whenever\nuser presses ",Object(c.b)("inlineCode",{parentName:"p"},"Ctrl-d"),". Here, ",Object(c.b)("inlineCode",{parentName:"p"},"createSpeechNode()")," is a command which will insert a new ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," node for us."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),"<DOC>\n  || EDITOR LAND ||\n  <containerDOM>\n    || YOUR LAND ||\n    <contentDOM> || EDITOR LAND || </contentDOM>\n  </containerDOM>\n  || EDITOR LAND ||\n</DOC>\n")),Object(c.b)("h2",{id:"rendering"},"Rendering"),Object(c.b)("p",null,"Fully aborbing the visualization above, we create a React component:"),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'<div>\n  <div className="your-land" contentEditable={false}>\n    <select\n      onChange={(e) => {\n        setLang(e.target.value);\n      }}\n    >\n      <option>some option</option>\n    </select>\n    <button onClick={onPlay}>Play</button>\n  </div>\n  {children}\n</div>\n')),Object(c.b)("p",null,"We put all our customization under the div ",Object(c.b)("inlineCode",{parentName:"p"},".your-land"),". Bangle will automatically insert ",Object(c.b)("inlineCode",{parentName:"p"},"contentDOM")," in the ",Object(c.b)("inlineCode",{parentName:"p"},"children")," to allow for typing in our speech component."),Object(c.b)("p",null,"As you notice we have marked just a part of the UI as ",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable=false"),", this\ntells the browser that unlike the rest, this content is not meant to be editable."),Object(c.b)("p",null,"\ud83d\udca1 When creating NodeView UI make sure that all the dom\nancestors of ",Object(c.b)("inlineCode",{parentName:"p"},"{children}")," are free of ",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable=true")," or ",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable=false"),". This helps prevent\n",Object(c.b)("inlineCode",{parentName:"p"},"contentEditable")," islands, which hamper the free flow of the cursor in your document. Like the example above, tuck\nall the custom UI in a single ",Object(c.b)("inlineCode",{parentName:"p"},"div")," or ",Object(c.b)("inlineCode",{parentName:"p"},"span"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),'// \ud83d\udeab donot do this as it creates `contentEditable` islands\n<div contentEditable={true}>\n  <div className="your-land" contentEditable={false}>\n    <button onClick={onPlay}>Play</button>\n  </div>\n  {children}\n</div>\n\n// \ud83d\udeab donot do this as it creates `contentEditable` islands\n<div contentEditable={true}>\n  <div className="your-land" contentEditable={false}>\n    <button onClick={onPlay}>Play</button>\n    <div contentEditable={true}>\n      {children}\n    </div>\n  </div>\n</div>\n\n// \ud83d\udc4d this is good\n<div>\n  <div className="your-land" contentEditable={false}>\n    <button onClick={onPlay}>Play</button>\n  </div>\n  <div>\n   {children}\n  </div>\n</div>\n')),Object(c.b)("h3",{id:"wiring-it-all-up"},"Wiring it all up"),Object(c.b)("p",null,"In your React component we expect a render prop which will be called whenever\nthere is an update for any of your node view and based on the type of your node\nyou can decide what component to render."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-jsx"}),"<BangleEditor\n  state={editorState}\n  renderNodeViews={({ node, updateAttrs, children }) => {\n    if (node.type.name === 'speech') {\n      return (\n        <Speech node={node} updateAttrs={updateAttrs}>\n          {children}\n        </Speech>\n      );\n    }\n  }}\n/>\n")),Object(c.b)("p",null,"In the second plugin, we tell Bangle to use a NodeView plugin for rendering the ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," node. With this\nwe are on our own on deciding the rendering of this node."),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"contentDOM")," and ",Object(c.b)("inlineCode",{parentName:"p"},"containerDOM")," are names you will hear often in the docs:"),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("inlineCode",{parentName:"p"},"contentDOM"),": Is the dom node which will be the parent of the content. As you know, in our spec\nwe defined our node to have any content which is of the group ",Object(c.b)("inlineCode",{parentName:"p"},"inline"),". So anything that you type\nin the speech node, will be directly housed by this dom node.")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("p",{parentName:"li"},Object(c.b)("inlineCode",{parentName:"p"},"containerDOM"),": This is the outermost node of ",Object(c.b)("inlineCode",{parentName:"p"},"speech")," node."))),Object(c.b)("p",null,"The bangle editor will directly interface with these two nodes and leave the things in between for you.\nYou can visualize this relationship something like this,\nwhere you only control the part demarcated as ",Object(c.b)("inlineCode",{parentName:"p"},"YOUR LAND"),"."),Object(c.b)("pre",null,Object(c.b)("code",Object(r.a)({parentName:"pre"},{className:"language-js"}),"NodeView.createPlugin({\n  name: 'speech',\n  // The speech component will be mounted on this\n  containerDOM: ['div', { class: 'speech-container' }],\n  // The dom.Node which Bangle will control to allow for typing of things to speak.\n  contentDOM: ['span', { class: 'speech-text' }],\n});\n")))}C.isMDXComponent=!0},143:function(e,t,n){"use strict";n.d(t,"q",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"l",(function(){return u})),n.d(t,"u",(function(){return d})),n.d(t,"t",(function(){return l})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return p})),n.d(t,"m",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"n",(function(){return v})),n.d(t,"j",(function(){return y})),n.d(t,"r",(function(){return O})),n.d(t,"f",(function(){return w})),n.d(t,"o",(function(){return k})),n.d(t,"k",(function(){return j})),n.d(t,"p",(function(){return x})),n.d(t,"i",(function(){return M})),n.d(t,"d",(function(){return S})),n.d(t,"v",(function(){return A})),n.d(t,"s",(function(){return E})),n.d(t,"a",(function(){return N}));var r=n(159),o=n(147),a=n(183),i=n(149);function c(){return r.safeInsert.apply(void 0,arguments)}var s=r.findParentNodeOfType;function u(e){return function(t){var n=t.selection,r=n.from,o=n.$from,a=n.to;return n.empty?Boolean(e.isInSet(t.tr.storedMarks||o.marks())):Boolean(t.doc.rangeHasMark(r,a,e))}}var d=function(e,t){return Number.isInteger(e)&&e>=0&&e<t.content.size},l=function(e,t){return[t.bulletList,t.orderedList].includes(e)};function f(e,t){var n=e.selection,r=n.from,o=n.to,a=[];e.doc.nodesBetween(r,o,(function(e){a=[].concat(a,e.marks)}));var i=a.find((function(e){return e.type.name===t.name}));return i?i.attrs:{}}function p(e){var t;if(e.isInline)return(t=e).isText?!!t.textContent.trim():"hardBreak"!==t.type.name;if(e.isBlock&&(e.isLeaf||e.isAtom))return!0;if(!e.childCount)return!1;for(var n=0;n<e.childCount;n++){if(p(e.child(n)))return!0}return!1}function m(e){if(e&&e.textContent)return!1;if(!e||!e.childCount||1===e.childCount&&h(e.firstChild))return!0;var t=[],n=[];return e.forEach((function(e){e.isInline?n.push(e):t.push(e)})),!n.length&&!t.filter((function(e){return!!e.childCount&&!(1===e.childCount&&h(e.firstChild))||e.isAtom})).length}function h(e){return!e||"paragraph"===e.type.name&&!e.textContent&&!e.childCount}function b(e,t){return function(n,r,o){return Array.isArray(e)||(e=[e]),!e.some((function(e){return!e(n,o)}))&&(t(n,r,o)||!1)}}function g(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function v(e,t,n,r){return 0===function(e,t,n){var r=[],o=function(e,t){var n=["blockquote","bulletList","orderedList"];if(1===t.depth)return t;var r=t.node(t.depth),o=t;for(;t.depth>=1;)(r=(t=e.resolve(t.before(t.depth))).node(t.depth))&&-1!==n.indexOf(r.type.name)&&(o=t);return o}(e,t).depth,a=e.resolve(t.start(o));for(;a.pos<=n.start(n.depth);){var i=Math.min(a.depth,o),c=a.node(i);if(c&&r.push(c),0===i)break;var s=e.resolve(a.after(i));if(s.start(i)>=e.nodeSize-2)break;s.depth!==a.depth&&(s=e.resolve(s.pos+2)),a=s.depth?e.resolve(s.start(s.depth)):e.resolve(s.end(s.depth))}return r}(e,t,n).filter((function(e){return e.type!==r})).length}var y=function(e){var t=e.selection,n=t.empty,r=t.$from;return n&&(0===r.parentOffset||e.selection instanceof a.a)},O=function(e,t){var n,r=e.tr.selection,o=r.from,a=r.to;return e.doc.nodesBetween(o,a,(function(r,i,c){if(r.isText||i<o||i>a)return!0;r.marks.forEach((function(o){if(!c.type.allowsMarkType(o.type)||t&&!t.allowsMarkType(o.type)){var a=r.marks.filter((function(e){return e.type!==o.type})),s=i>0?i-1:0,u=e.doc.nodeAt(s);if(!u||u.isText)return;n=(n||e.tr).setNodeMarkup(s,void 0,r.attrs,a)}}))}),o),n},w=function(e,t,n){var r=n.depth,o=t.nodes,a=o.bulletList,i=o.orderedList,c=e;c||(c=t.nodes.listItem);for(var s=n.depth;s>0;s--){var u=n.node(s);if(u.type!==a&&u.type!==i||(r=s),u.type!==a&&u.type!==i&&u.type!==c)break}return r-1};function k(e,t){for(var n=[],r=0;r<e.childCount;r++)n.push(t(e.child(r),r,e instanceof o.Fragment?e:e.content));return n}var j=function(e){var t=e.selection.$from;return!(t.depth>1)||(e.selection instanceof a.a&&0===t.parentOffset||0===t.index(t.depth-1))};function x(e,t){var n=C(e.content,t);return new o.Slice(n,e.openStart,e.openEnd)}function C(e,t,n){for(var r=[],a=0,i=e.childCount;a<i;a++){var c=e.child(a),s=c.isLeaf?t(c,n,a):t(c.copy(C(c.content,t,c)),n,a);s&&(s instanceof o.Fragment?r.push.apply(r,s.content):Array.isArray(s)?r.push.apply(r,s):r.push(s))}return o.Fragment.fromArray(r)}function M(e,t,n,r){void 0===t&&(t="above"),void 0===n&&(n=!1);var o="above"===t,a=n?-1:void 0;return function(t,n){var i=o?t.selection.$from.before(a):t.selection.$from.after(a),s=e.createAndFill(r),u=t.tr,d=c(s,i)(t.tr);return u!==d&&(n&&n(d.scrollIntoView()),!0)}}function S(e,t,n,r){var o={start:-1,end:-1};return t.nodesBetween(n,r,(function(t,n){if(o.start>-1)return!1;-1===o.start&&e.isInSet(t.marks)&&(o={start:n,end:n+Math.max(t.textContent.length,1)})})),o}function A(e,t){return new i.a({key:e,state:{init:function(){return t},apply:function(e,t){return t}}})}function E(e){var t=document.createElement("div"),n=o.DOMSerializer.fromSchema(e.schema).serializeFragment(e.doc.content);return t.appendChild(n),t.innerHTML}function N(e,t){return e&&function(n){n.isGeneric&&t(n),e(n)}}},145:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"j",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"i",(function(){return l})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"h",(function(){return m}));n(192),n(193);var r=n(147),o=n(160);function a(e){if(null==e)throw new Error("undefined value passed");return Array.isArray(e)?e:[e]}function i(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=[e].concat(n);return function(e){return o.reduceRight((function(e,t){return t(e)}),e)}}function c(e,t){var n=Array.from(t.matchAll(e));if(0===n.length)return[{start:0,end:t.length,match:!1,subString:t}];for(var r=[],o=0,a=0;a<n.length;a++){var i=n[a],c=i.index,s=c+i[0].length;o!==c&&r.push({start:o,end:c,match:!1}),r.push({start:c,end:s,match:!0}),o=s}var u=r[r.length-1]&&r[r.length-1].end;return u&&u!==t.length&&r.push({start:u,end:t.length,match:!1}),r=r.map((function(e){return Object.assign({},e,{subString:t.slice(e.start,e.end)})}))}function s(e){return void 0===e&&(e=10),Math.random().toString(36).substring(2,15).slice(0,e)}function u(e,t){return Object.fromEntries(Object.entries(e).map((function(e){var n=e[0],r=e[1];return[n,t(r,n)]})))}function d(e,t){return Object.fromEntries(Object.entries(e).filter((function(e){var n=e[0],r=e[1];return t(r,n)})))}function l(e){var t=[],n=null,r=function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];t=o,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r}var f=o.b||o.a?function(){}:console.warn.bind(console,"Warning in bangle.js:");function p(e){var t=r.DOMSerializer.renderSpec(window.document,e),n=t.dom;if(t.contentDOM)throw new Error("createElement does not support creating contentDOM");return n}function m(e,t){requestAnimationFrame((function(){t(e.state,e.dispatch,e)}))}},149:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var r=n(168);n.d(t,"a",(function(){return r.a})),n.d(t,"c",(function(){return r.b}));var o=function(e,t){this.name=e,this.plugins=t}},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return h}));var r=n(159),o=n(142),a=n(145),i=n(143),c=n(147),s=n(162);function u(e){return function(t,n,a){if(!t.selection.empty)return!1;var i=Object(r.findParentNodeOfType)(e)(t.selection);if(!i)return!1;var c=t.selection,s=t.tr;s=s.setSelection(function(e,t){var n=e.selection.$from,r=n.start(t),a=n.end(t);return o.TextSelection.create(e.doc,r,a)}(t,i.depth)),n&&n(s),document.execCommand("copy");var u=a.state.tr;return n&&n(u.setSelection(o.Selection.near(u.doc.resolve(c.$from.pos)))),!0}}function d(e){return function(t,n){if(!t.selection.empty)return!1;var a=Object(r.findParentNodeOfType)(e)(t.selection);if(!a||!a.node)return!1;var i=t.tr;return i=i.setSelection(o.NodeSelection.create(i.doc,a.pos)),n&&n(i),document.execCommand("cut"),!0}}function l(e,t){return t=Object(a.a)(t),function(n){var o=Object(r.findParentNodeOfType)(e)(n.selection);if(!o)return!1;var a=o.depth-1;if(a<0)return!1;var i=n.selection.$from.node(a);return t.includes(i.type)}}function f(e,t){void 0===t&&(t="UP");var n="DOWN"===t;return function(t,a){if(!t.selection.empty)return!1;var u=t.selection.$from,d=Object(r.findParentNodeOfType)(e)(t.selection);if(!d)return!1;var l=d.node,f=d.depth-1,p=u.node(f),m=u.start(f);if(l.type!==e)return!1;var h=Object(i.o)(p,(function(e){return e})),b=h.indexOf(l),g=n?b+1:b-1;if(g>=h.length||g<0)return!1;var v=h[g].nodeSize,y=[h[g],h[b]];h[b]=y[0],h[g]=y[1];var O=t.tr,w=m,k=u.end(f),j=new c.Slice(c.Fragment.fromArray(h),0,0);return O=(O=O.step(new s.c(w,k,j,!1))).setSelection(o.Selection.near(O.doc.resolve(n?u.pos+v:u.pos-v))),a&&a(O.scrollIntoView()),!0}}var p=function(e){return function(t,n,r){var a=e.nodeSize-1;"doc"===e.type.name&&(a=e.content.size-1);var i=t.tr.setSelection(o.TextSelection.create(t.doc,a));return n&&n(i),!0}};function m(e){return function(t,n){var a=Object(r.findParentNodeOfType)(e)(t.selection);if(!a)return!1;if(n){var i=a.start;n(t.tr.setSelection(o.TextSelection.create(t.doc,i)))}return!0}}function h(e){return function(t,n){var a=Object(r.findParentNodeOfType)(e)(t.selection);if(!a)return!1;if(n){var i=a.node,c=a.start;n(t.tr.setSelection(o.TextSelection.create(t.doc,c+i.content.size)))}return!0}}},151:function(e,t,n){"use strict";var r={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var o=/Edge\/(\d+)/.exec(navigator.userAgent),a=/MSIE \d/.test(navigator.userAgent),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);r.mac=/Mac/.test(navigator.platform);var c=r.ie=!!(a||i||o);r.ie_version=a?document.documentMode||6:i?+i[1]:o?+o[1]:null,r.gecko=!c&&/gecko\/\d/i.test(navigator.userAgent),r.chrome=!c&&/Chrome\//.test(navigator.userAgent),r.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),r.android=/Android \d/.test(navigator.userAgent),r.ios=!c&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),r.webkit=!c&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}t.a=r},152:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(148);function o(e,t){return new r.a(e,(function(e,n,r,o){var a=e.tr,i=n.length-1,c=o,s=r;if(n[i]){var u=r+n[0].indexOf(n[i-1]),d=u+n[i-1].length-1,l=u+n[i-1].lastIndexOf(n[i]),f=l+n[i].length;if(function(e,t,n){var r=[];return n.doc.nodesBetween(e,t,(function(e,t){r=[].concat(r,e.marks.map((function(n){return{start:t,end:t+e.nodeSize,mark:n}})))})),r}(r,o,e).filter((function(e){return e.mark.type.excluded.find((function(e){return e.name===t.name}))})).filter((function(e){return e.end>u})).length)return!1;f<d&&a.delete(f,d),l>u&&a.delete(u,l),c=(s=u)+n[i].length}return a.addMark(s,c,t.create()),a.removeStoredMark(t),a}))}},153:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(142),o=n(147);function a(e,t,n){var a=function r(a,i){var c=[];return a.forEach((function(o){if(o.isText){for(var a,s=o.text,u=0,d=!!o.marks.filter((function(e){return"link"===e.type.name}))[0];!d&&null!==(a=e.exec(s));)if(i&&i.type.allowsMarkType(t)&&a[1]){var l=a.index,f=l+a[0].length,p=l+a[0].indexOf(a[1]),m=p+a[1].length,h=n instanceof Function?n(a):n;l>0&&c.push(o.cut(u,l)),c.push(o.cut(p,m).mark(t.create(h).addToSet(o.marks))),u=f}u<s.length&&c.push(o.cut(u))}else c.push(o.copy(r(o.content,o)))})),o.Fragment.fromArray(c)};return new r.Plugin({props:{transformPasted:function(e){return new o.Slice(a(e.content),e.openStart,e.openEnd)}}})}},154:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(146),o="undefined"==typeof window||window.BANGLE_DEBUG_KEYBINDINGS,a=new WeakMap;function i(e,t){var n=(void 0===t?{}:t).monitor,i=void 0===n?o:n,c=Object.entries(e).flatMap((function(e){var t=e[0],n=e[1];return t&&"undefined"!==t&&"null"!==t&&"false"!==t?t.split(" ").map((function(e){return[e,n]})):[]})).filter((function(e){e[0];return null!=e[1]})),s=Object.fromEntries(c),u=Object(r.b)(s);return i&&a.set(u,s),u}function c(){return i.apply(void 0,arguments)}},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return C})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return M.a})),n.d(t,"f",(function(){return k.a})),n.d(t,"d",(function(){return f.a})),n.d(t,"e",(function(){return f.c})),n.d(t,"g",(function(){return v})),n.d(t,"h",(function(){return S}));var r=n(151),o=(n(164),n(167),n(160)),a=n(145),i=(n(154),n(152),n(153),n(165),n(182),n(158)),c=n(148),s=n(146),u=n(205),d=n(144),l=n(206),f=n(149),p=n(166),m=n(170);function h(e,t,n){var r=void 0===n?{}:n,o=r.metadata,h=void 0===o?{}:o,g=r.editorProps,v=r.defaultPlugins,y=void 0===v||v,O=r.dropCursorOpts,w=r.transformPlugins,k=void 0===w?function(e){return e}:w,j={schema:e.schema,specRegistry:e,metadata:h},x=b(t,j),C=x[0],M=x[1];if(y){var S=[];M.has("history")||S.push(p.plugins()),M.has("editorStateCounter")||S.push(m.plugins()),(C=function(e,t){var n=void 0===t?{}:t,r=n.inputRules,o=void 0===r||r,a=n.undoInputRule,i=void 0===a||a,u=[],d=[];e.forEach((function(e){e instanceof c.a?d.push(e):u.push(e)})),o&&(e=[].concat(u,[Object(c.b)({rules:d})]));i&&e.push(Object(s.b)({Backspace:c.d}));return e}(C=C.concat(b(S,j)[0]))).push(Object(s.b)(d.b),Object(l.a)(O),Object(u.a)())}if(g&&C.push(new f.a({props:g})),(C=k(C=C.filter(Boolean))).some((function(e){return!(e instanceof f.a)})))throw Object(a.b)("You are either using multiple versions of the library or not returning a Plugin class in your plugins. Investigate :",C.find((function(e){return!(e instanceof f.a)}))),new Error("Invalid plugin");return function(e,t){for(var n,r=e.filter((function(e){return e.props&&e.props.nodeViews})),o=new Map,c=Object(i.a)(r);!(n=c()).done;)for(var s=n.value,u=0,d=Object.keys(s.props.nodeViews);u<d.length;u++){var l=d[u];if(!t.schema.nodes[l])throw Object(a.b)("When loading your plugins, we found nodeView implementation for the node '"+l+"' did not have a corresponding spec. Check the plugin:",s,"and your specRegistry",t),new Error("NodeView validation failed. Spec for '"+l+"' not found.");if(o.has(l))throw Object(a.b)("When loading your plugins, we found more than one nodeView implementation for the node '"+l+"'. Bangle can only have a single nodeView implementation, please check the following two plugins",s,o.get(l)),new Error("NodeView validation failed. Duplicate nodeViews for '"+l+"' found.");o.set(l,s)}}(C,e),C}function b(e,t){var n=new Set;return[function e(r){if(Array.isArray(r))return r.flatMap((function(t){return e(t)})).filter(Boolean);if(r instanceof f.b){if(n.has(r.name))throw new Error("Duplicate names of pluginGroups "+r.name+" not allowed.");return n.add(r.name),e(r.plugins)}if("function"==typeof r){if(!t)throw new Error("Found a function but no payload");return e(r(t))}return r}(e),n]}var g=n(143),v=n(157),y=n(188),O=n(142),w=n(147),k=n(163),j=function(e){var t=void 0===e?{}:e,n=t.specRegistry,r=t.specs,o=t.plugins,a=void 0===o?function(){return[]}:o,i=t.initialValue,c=t.editorProps,s=t.pmStateOpts,u=t.pluginMetadata,d=void 0===u?{}:u;if(r&&n)throw new Error("Cannot have both specs and specRegistry defined");n||(n=new k.a(r)),Array.isArray(a)&&console.warn("The use plugins as an array is deprecated, please pass a function which returns an array of plugins. Refer: https://bangle.dev/docs/api/core#bangleeditorstate"),this.specRegistry=n;var l=this.specRegistry.schema;this.pmState=O.EditorState.create(Object.assign({schema:l,doc:x({schema:l,content:i}),plugins:h(n,a,{editorProps:c,metadata:d})},s))},x=function(e){var t=e.schema,n=e.content,r=e.parseOptions;if(null==n)return t.nodeFromJSON({type:"doc",content:[{type:"paragraph"}]});if(n instanceof w.Node)return n;if("object"==typeof n)return t.nodeFromJSON(n);if("string"==typeof n){var o=document.createElement("div");return o.innerHTML=n.trim(),w.DOMParser.fromSchema(t).parse(o,r)}return!1},C=function(){function e(e,t){var n=t.focusOnInit,r=void 0===n||n,o=t.state,a=t.pmViewOpts,i=void 0===a?{}:a;if(this.destroyed=!1,!(o instanceof j))throw new Error("state is required and must be an instance of BangleEditorState");this.view=new y.c(e,Object.assign({state:o.pmState,dispatchTransaction:function(e){var t=this.state.apply(e);this.updateState(t)},attributes:{class:"bangle-editor"}},i)),r&&this.focusView()}var t=e.prototype;return t.focusView=function(){o.b||this.view.focused||this.view.focus()},t.destroy=function(){this.destroyed||(null!==this.view.docView?(this.destroyed=!0,this.view.destroy()):this.destroyed=!0)},t.toHTMLString=function(){return Object(g.s)(this.view.state)},e}(),M=n(161),S=r.a.chrome&&!r.a.android&&r.a.chrome_version>=58},157:function(e,t,n){"use strict";n.r(t),n.d(t,"bold",(function(){return f})),n.d(t,"code",(function(){return p})),n.d(t,"italic",(function(){return m})),n.d(t,"link",(function(){return h})),n.d(t,"strike",(function(){return r})),n.d(t,"underline",(function(){return o})),n.d(t,"doc",(function(){return a})),n.d(t,"paragraph",(function(){return L})),n.d(t,"text",(function(){return i})),n.d(t,"blockquote",(function(){return z})),n.d(t,"bulletList",(function(){return $})),n.d(t,"codeBlock",(function(){return c})),n.d(t,"hardBreak",(function(){return s})),n.d(t,"heading",(function(){return Q})),n.d(t,"horizontalRule",(function(){return u})),n.d(t,"listItem",(function(){return d})),n.d(t,"orderedList",(function(){return Me})),n.d(t,"image",(function(){return l})),n.d(t,"history",(function(){return Ue})),n.d(t,"editorStateCounter",(function(){return We}));var r={};n.r(r),n.d(r,"spec",(function(){return w})),n.d(r,"plugins",(function(){return k})),n.d(r,"commands",(function(){return j})),n.d(r,"defaultKeys",(function(){return x})),n.d(r,"toggleStrike",(function(){return M})),n.d(r,"queryIsStrikeActive",(function(){return S}));var o={};n.r(o),n.d(o,"spec",(function(){return A})),n.d(o,"plugins",(function(){return E})),n.d(o,"commands",(function(){return N})),n.d(o,"defaultKeys",(function(){return D})),n.d(o,"toggleUnderline",(function(){return P})),n.d(o,"queryIsUnderlineActive",(function(){return q}));var a={};n.r(a),n.d(a,"spec",(function(){return T}));var i={};n.r(i),n.d(i,"spec",(function(){return B}));var c={};n.r(c),n.d(c,"spec",(function(){return V})),n.d(c,"plugins",(function(){return H})),n.d(c,"commands",(function(){return U})),n.d(c,"defaultKeys",(function(){return W})),n.d(c,"queryIsCodeActiveBlock",(function(){return G}));var s={};n.r(s),n.d(s,"spec",(function(){return J})),n.d(s,"plugins",(function(){return Y})),n.d(s,"defaultKeys",(function(){return Z}));var u={};n.r(u),n.d(u,"spec",(function(){return ee})),n.d(u,"plugins",(function(){return te}));var d={};n.r(d),n.d(d,"spec",(function(){return de})),n.d(d,"plugins",(function(){return le})),n.d(d,"commands",(function(){return fe})),n.d(d,"defaultKeys",(function(){return pe})),n.d(d,"indentListItem",(function(){return ge})),n.d(d,"outdentListItem",(function(){return ve})),n.d(d,"moveListItemUp",(function(){return we})),n.d(d,"moveListItemDown",(function(){return ke})),n.d(d,"insertEmptySiblingList",(function(){return je})),n.d(d,"insertEmptySiblingListAbove",(function(){return xe})),n.d(d,"insertEmptySiblingListBelow",(function(){return Ce}));var l={};n.r(l),n.d(l,"spec",(function(){return Pe})),n.d(l,"plugins",(function(){return qe})),n.d(l,"commands",(function(){return Te})),n.d(l,"updateImageNodeAttribute",(function(){return He}));var f=n(175),p=n(176),m=n(177),h=n(172),b=n(152),g=n(153),v=n(144),y=n(146),O=n(143),w=function(e){void 0===e&&(e={});return{type:"mark",name:C,schema:{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(e){return"line-through"===e}}],toDOM:function(){return["s",0]}},markdown:{toMarkdown:{open:"~~",close:"~~",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{s:{mark:"strike"}}}}},k=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?x:t;return function(e){var t,r=function(e){return e.marks.strike}(e.schema);return[Object(g.a)(/~([^~]+)~/g,r),Object(b.a)(/~([^~]+)~$/,r),n&&Object(y.b)((t={},t[n.toggleStrike]=Object(v.f)(r),t))]}},j={toggleStrike:M,queryIsStrikeActive:S},x={toggleStrike:"Mod-d"},C="strike";function M(){return function(e,t,n){return Object(v.f)(e.schema.marks.strike)(e,t,n)}}function S(){return function(e){return Object(O.l)(e.schema.marks.strike)(e)}}var A=function(e){void 0===e&&(e={});return{type:"mark",name:I,schema:{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function(e){return e===I}}],toDOM:function(){return["u",0]}},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0}}}},E=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?D:t;return function(e){var t,r=function(e){return e.marks.underline}(e.schema);return[Object(b.a)(/~([^~]+)~$/,r),Object(g.a)(/~([^~]+)~/g,r),n&&Object(y.b)((t={},t[n.toggleUnderline]=Object(v.f)(r),t))]}},N={toggleUnderline:P,queryIsUnderlineActive:q},D={toggleUnderline:"Mod-u"},I="underline";function P(){return function(e,t,n){return Object(v.f)(e.schema.marks.underline)(e,t,n)}}function q(){return function(e){return Object(O.l)(e.schema.marks.underline)(e)}}var T=function(e){var t=(void 0===e?{}:e).content;return{type:"node",topNode:!0,name:"doc",schema:{content:void 0===t?"block+":t}}};var L=n(178),B=function(e){void 0===e&&(e={});return{type:"node",name:"text",schema:{group:"inline"},markdown:{toMarkdown:function(e,t){e.text(t.text)}}}};var z=n(179),$=n(180),_=n(148),R=n(150),V=function(e){void 0===e&&(e={});return{type:"node",name:F,schema:{attrs:{language:{default:""}},content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},markdown:{toMarkdown:function(e,t){e.write("```"+(t.attrs.language||"")+"\n"),e.text(t.textContent,!1),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},parseMarkdown:{code_block:{block:F,noCloseToken:!0},fence:{block:F,getAttrs:function(e){return{language:e.info||""}},noCloseToken:!0}}}}},H=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,r=void 0===n||n,o=t.keybindings,a=void 0===o?W:o;return function(e){var t,n=e.schema,o=K(n);return[r&&Object(_.c)(/^```$/,o),a&&Object(y.b)((t={},t[a.toCodeBlock]=Object(v.e)(o),t[a.moveUp]=Object(R.e)(o,"UP"),t[a.moveDown]=Object(R.e)(o,"DOWN"),t[a.insertEmptyParaAbove]=Object(O.b)(G(),Object(O.i)(n.nodes.paragraph,"above",!1)),t[a.insertEmptyParaBelow]=Object(O.b)(G(),Object(O.i)(n.nodes.paragraph,"below",!1)),t))]}},U={queryIsCodeActiveBlock:G},W={toCodeBlock:"Shift-Ctrl-\\",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},F="codeBlock",K=function(e){return e.nodes.codeBlock};function G(){return function(e){var t=K(e.schema);return Boolean(Object(O.e)(t)(e.selection))}}var J=function(e){void 0===e&&(e={});return{type:"node",name:X,schema:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},markdown:{toMarkdown:function(e,t,n,r){for(var o=r+1;o<n.childCount;o++)if(n.child(o).type!==t.type)return void e.write("\\\n")},parseMarkdown:{hardbreak:{node:"hardBreak"}}}}},Y=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?Z:t;return function(e){var t,r=function(e){return e.nodes[X]}(e.schema),o=Object(v.c)(v.d,(function(e,t){return t&&t(e.tr.replaceSelectionWith(r.create()).scrollIntoView()),!0}));return[n&&Object(y.b)((t={},t[n.insert]=o,t))]}},Z={insert:"Shift-Enter"},X="hardBreak";var Q=n(174),ee=function(e){void 0===e&&(e={});return{type:"node",name:ne,schema:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},markdown:{toMarkdown:function(e,t){e.write(t.attrs.markup||"---"),e.closeBlock(t)},parseMarkdown:{hr:{node:ne}}}}},te=function(e){var t=(void 0===e?{}:e).markdownShortcut,n=void 0===t||t;return function(e){var t=function(e){return e.nodes.horizontalRule}(e.schema);return[n&&new _.a(/^(?:---|___\s|\*\*\*\s)$/,(function(e,n,r,o){if(!n[0])return null;var a=e.tr.replaceWith(r-1,o,t.createChecked()),i=e.doc.resolve(r),c=!1;if(i.end()!=o)c=!1;else if(i.after()==i.end(-1))c=!0;else{c=e.doc.resolve(i.after()).nodeAfter.type===t}return c?Object(O.q)(e.schema.nodes.paragraph.createChecked(),a.mapping.map(i.after()))(a):a}))]}},ne="horizontalRule";var re=n(171),oe=n(167),ae=n(151),ie=n(169),ce=n(145),se=n(161),ue=function(){};var de=function(e){void 0===e&&(e={});var t=Object(oe.a)(me,{tag:"li",content:0}),n=t.toDOM,r=t.parseDOM;return{type:"node",name:me,schema:{content:"(paragraph) (paragraph | bulletList | orderedList)*",defining:!0,draggable:!0,attrs:{todoChecked:{default:null}},toDOM:n,parseDOM:r},markdown:{toMarkdown:function(e,t){null!=t.attrs.todoChecked&&e.write(t.attrs.todoChecked?"[x] ":"[ ] "),e.renderContent(t)},parseMarkdown:{list_item:{block:me,getAttrs:function(e){return{todoChecked:e.attrGet("isDone")}}}}}}},le=function(e){var t=void 0===e?{}:e,n=t.keybindings,r=void 0===n?pe:n,o=t.nodeView,a=void 0===o||o;return function(e){var t,n,o,i,c,s=e.schema,u=he(s);return[r&&Object(y.b)((t={},t[r.toggleDone]=Object(O.b)(be,Object(re.g)(s.nodes.listItem,(function(e){return Object.assign({},e,{todoChecked:null!=e.todoChecked&&!e.todoChecked})}))),t.Backspace=Object(re.a)(u),t.Enter=Object(re.b)(u),t[r.indent]=ge(),t[r.outdent]=ve(),t[r.moveUp]=we(),t[r.moveDown]=ke(),t[r.emptyCut]=Object(O.b)(be,Object(R.b)(u)),t[r.emptyCopy]=Object(O.b)(be,Object(R.a)(u)),t[r.insertEmptyListAbove]=xe(),t[r.insertEmptyListBelow]=Ce(),t)),a&&(n=me,o=function(e,t){return"bulletList"===e.doc.resolve(t).parent.type.name},i=function(e,t,n){if(!n.containerDOM.hasAttribute("data-bangle-is-todo")){var r=c(e.todoChecked,(function(e){t({todoChecked:e})}));n.containerDOM.setAttribute("data-bangle-is-todo",""),n.containerDOM.prepend(r)}},c=function(e,t){var n=Object(ce.d)(["span",{contentEditable:!1},["input",{type:"checkbox"}]]),r=n.querySelector("input");return e&&r.setAttribute("checked",""),r.addEventListener("input",(function(e){ue("change event",r.checked),t(r.checked)})),n},se.a.createPlugin({name:n,containerDOM:["li",{"data-bangle-name":n}],contentDOM:["span",{}],renderHandlers:{create:function(e,t){var n=t.attrs,r=t.updateAttrs,a=t.getPos,c=t.view;null!=n.todoChecked&&o(c.state,a())&&i(n,r,e),e.containerDOM.appendChild(e.contentDOM)},update:function(e,t){var n=t.attrs,r=t.view,a=t.getPos,c=t.updateAttrs,s=n.todoChecked;if(null!=s){if(o(r.state,a())){i(n,c,e);var u=e.containerDOM.firstChild.firstChild;ue("updating inputElement, checked = "+s),u.checked=s}}else!function(e){e.containerDOM.hasAttribute("data-bangle-is-todo")&&(e.containerDOM.removeAttribute("data-bangle-is-todo"),e.containerDOM.removeChild(e.containerDOM.firstChild))}(e)},destroy:function(){}}}))]}},fe={indentListItem:ge,outdentListItem:ve,moveListItemUp:we,moveListItemDown:ke},pe={toggleDone:ae.a.mac?"Ctrl-Enter":"Ctrl-I",indent:"Tab",outdent:"Shift-Tab",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyListAbove:"Mod-Shift-Enter",insertEmptyListBelow:"Mod-Enter"},me="listItem",he=function(e){return e.nodes.listItem},be=function(e){var t=he(e.schema);return Object(R.f)(t,[e.schema.nodes.bulletList,e.schema.nodes.orderedList])};function ge(){return function(e,t,n){var r=he(e.schema);return Object(re.c)(r)(e,t,n)}}function ve(){return function(e,t,n){var r=he(e.schema);return Object(re.e)(r)(e,t,n)}}var ye=function(e){return Object(ie.a)(e.selection.$from.node(-1),e.schema)};function Oe(e){return function(t,n,r){var o=t.schema,a=he(o),i=Object(R.f)(a,[o.nodes.bulletList,o.nodes.orderedList]);return Object(O.b)(i,function(e){return Object(v.c)(Object(R.e)(a,e),(function(t,n,r){var o=t.selection.$from.node(-3),i=Object(ie.a)(o,t.schema);if(!Object(re.d)(a,e)(t,n,r))return!1;if(i&&n){var c=r.state,s=c.tr,u=c.schema;n(s=Object(ie.e)(s,u,c.selection.$from.node(-1),c.selection.$from.before(-1)))}return!0}))}(e))(t,n,r)}}function we(){return Oe("UP")}function ke(){return Oe("DOWN")}function je(e){return void 0===e&&(e=!0),function(t,n,r){var o=he(t.schema);return Object(v.c)(Object(O.b)(ye,Object(O.i)(o,e?"above":"below",!0,{todoChecked:!1})),Object(O.b)(be,Object(O.i)(o,e?"above":"below",!0)))(t,n,r)}}function xe(){return je(!0)}function Ce(){return je(!1)}var Me=n(181),Se=n(192),Ae=n.n(Se),Ee=n(158),Ne=n(193),De=n(142),Ie=n(159),Pe=function(e){void 0===e&&(e={});return{type:"node",name:Le,schema:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(e){return{src:e.getAttribute("src"),title:e.getAttribute("title"),alt:e.getAttribute("alt")}}}],toDOM:function(e){return["img",e.attrs]}},markdown:{toMarkdown:function(e,t){var n=e.esc(t.attrs.alt||""),r=e.esc(t.attrs.src)+(t.attrs.title?" "+e.quote(t.attrs.title):"");e.write("!["+n+"]("+r+")")},parseMarkdown:{image:{node:Le,getAttrs:function(e){return{src:e.attrGet("src"),title:e.attrGet("title")||null,alt:e.children[0]&&e.children[0].content||null}}}}}}},qe=function(e){var t=void 0===e?{}:e,n=t.handleDragAndDrop,r=void 0===n||n,o=(t.keybindings,t.acceptFileType),a=void 0===o?"image/*":o,i=t.createImageNodes,c=void 0===i?ze:i;return function(e){var t=e.schema,n=Be(t);return[new _.a(/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,(function(e,t,r,o){var a=t[1],i=t[2],c=t[3];if(i)return c||(c=a),e.tr.replaceWith(r,o,n.create({src:i,alt:a,title:c}))})),r&&new De.Plugin({key:new De.PluginKey("image-drop-paste"),props:{handleDOMEvents:{drop:function(e,t){if(null==t.dataTransfer)return!1;var n=Ve(t.dataTransfer,a,!0);if(!n||0===n.length)return!1;t.preventDefault();var r=e.posAtCoords({left:t.clientX,top:t.clientY});return c(n,Be(e.state.schema),e).then((function(t){_e(e,null==r?void 0:r.pos,t)})),!0}},handlePaste:function(e,t,n){var r=t;if(!r.clipboardData)return!1;var o=Ve(r.clipboardData,a,!0);return!(!o||0===o.length)&&(c(o,Be(e.state.schema),e).then((function(t){_e(e,e.state.selection.from,t)})),!0)}}})]}},Te={},Le="image",Be=function(e){return e.nodes.image};function ze(e,t,n){return $e.apply(this,arguments)}function $e(){return($e=Object(Ne.a)(Ae.a.mark((function e(t,n,r){var o;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return Re(e)})));case 2:return o=e.sent,e.abrupt("return",o.map((function(e){return n.create({src:e})})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e,t,n){for(var r,o=Object(Ee.a)(n);!(r=o()).done;){var a=r.value,i=e.state.tr,c=Object(Ie.safeInsert)(a,t)(i);c!==i&&e.dispatch(c)}}function Re(e){return new Promise((function(t,n){var r=new FileReader;r.onerror=function(){n(new Error("Error reading file"+e.name))},"readAsDataURL"in r?(r.onload=function(e){t(e.target.result)},r.readAsDataURL(e)):(r.onload=function(n){var r=btoa(n.target.result);t("data:"+e.type+";base64,"+r)},r.readAsBinaryString(e))}))}function Ve(e,t,n){var r=function(e,t,n){var r,o=Array.from(e);if(""===t)return r=o.filter((function(e){return"file"===e.kind})),n?r:[r[0]];var a=t.toLowerCase().split(",").map((function(e){return e.split("/").map((function(e){return e.trim()}))})).filter((function(e){return 2===e.length})),i=function(e){if("file"!==e.kind)return!1;for(var t,n=e.type.toLowerCase().split("/").map((function(e){return e.trim()})),r=n[0],o=n[1],i=Object(Ee.a)(a);!(t=i()).done;){var c=t.value,s=c[0],u=c[1];if(r===s&&("*"===u||o===u))return!0}return!1};r=r=o.filter(i),!1===n&&(r=[r[0]]);return r}(e.items,t,n),o=[];return r.forEach((function(e){var t=e&&e.getAsFile();null!=t&&o.push(t)})),o}var He=function(e){return void 0===e&&(e={}),function(t,n,r){if(!t.selection instanceof De.NodeSelection||!t.selection.node)return!1;var o=t.selection.node;return o.type===Be(t.schema)&&(n&&n(t.tr.setNodeMarkup(t.selection.$from.pos,void 0,Object.assign({},o.attrs,e))),!0)}},Ue=n(166),We=n(170)},160:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=void 0;try{r="production"}catch(i){}var o="production"===r,a="test"===r},161:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(4),o=n(194),a=n(149),i=n(145),c=function(){},s=new WeakMap,u=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e),t.createPlugin=function(e){var n,r=e.name,o=e.containerDOM,c=e.contentDOM,s=e.renderHandlers;return new a.a({key:new a.c(r+"NodeView"),props:{nodeViews:(n={},n[r]=function(e,n,r,a){var u,d=Object(i.d)(o);return c&&(u=Object(i.d)(c)),new t({node:e,view:n,getPos:r,decorations:a,containerDOM:d,contentDOM:u,renderHandlers:s})},n)}})};var n=t.prototype;return n.update=function(e,t){return c("update node"),this._node.type===e.type&&(this._node===e&&this._decorations===t?(c("update node no change"),!0):(this._node=e,this._decorations=t,c("update node execute"),this.renderHandlers.update(this,this.getNodeViewProps()),!0))},n.selectNode=function(){this.containerDOM.classList.add("ProseMirror-selectednode"),this._selected=!0,c("select node"),this.renderHandlers.update(this,this.getNodeViewProps())},n.deselectNode=function(){this.containerDOM.classList.remove("ProseMirror-selectednode"),this._selected=!1,c("deselectNode node"),this.renderHandlers.update(this,this.getNodeViewProps())},n.ignoreMutation=function(e){return!!this._node.type.isAtom||"selection"!==e.type&&(!this.containerDOM.contains(e.target)&&e.target!==this.contentDOM)},n.destroy=function(){this.renderHandlers.destroy(this,this.getNodeViewProps()),this.containerDOM=void 0,this.contentDOM=void 0},t}(function(){var e=t.prototype;function t(e,t){var n=e.node,r=e.view,o=e.getPos,a=e.decorations,c=e.containerDOM,u=e.contentDOM,d=e.renderHandlers,l=void 0===d?function(e){var t=e.dom.parentNode;return s.get(t)}(r):d,f=(void 0===t?{}:t).selectionSensitive,p=void 0===f||f;if(this._node=n,this._view=r,this._getPos=o,this._decorations=a,this._selected=!1,!l)throw Object(i.b)("It appears the view =",r," was not associated with renderHandlers. You are either using nodeViews accidentally or have incorrectly setup nodeViews"),new Error("You either did not pass the renderHandlers correct or it cannot find render handlers associated with the view.");if(this.renderHandlers=l,this.containerDOM=c,this.contentDOM=u,this.contentDOM&&this.contentDOM.classList.add("bangle-nv-content"),this.containerDOM&&this.containerDOM.classList.add("bangle-nv-container"),this._node.type.isAtom&&this.contentDOM)throw new Error("An atom node cannot have a contentDOM");this.opts={selectionSensitive:p},this.renderHandlers.create(this,this.getNodeViewProps())}return e.getAttrs=function(){return this._node.attrs},e.getNodeViewProps=function(){var e=this;return{node:this._node,view:this._view,getPos:this._getPos,decorations:this._decorations,selected:this._selected,attrs:this._node.attrs,updateAttrs:function(t){var n,r,o;e._view.dispatch((n=e._getPos(),r=e._node,o=t,e._view.state.tr.setNodeMarkup(n,void 0,Object.assign({},r.attrs,o))))}}},Object(o.a)(t,[{key:"dom",get:function(){return this.containerDOM}}]),t}());function d(e,t){if(s.has(e))throw new Error("It looks like renderHandlers were already set by someone else.");s.set(e,t)}},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(158),o=n(194),a=n(147),i=n(157),c=n(145),s=function(){function e(e,t){void 0===e&&(e=[]);var n=(void 0===t?{}:t).defaultSpecs,o=void 0===n||n,s=d(e);s.forEach(u);var l=new Set(s.map((function(e){return e.name})));if(s.length!==l.size)throw Object(c.b)("The specRegistry has one or more specs with the same name",s),new Error("Duplicate spec error, please check your specRegistry");if(o){var f=[];l.has("paragraph")||f.unshift(i.paragraph.spec()),l.has("text")||f.unshift(i.text.spec()),l.has("doc")||f.unshift(i.doc.spec()),s=[].concat(d(f),s)}this._spec=s,this._schema=function(e){for(var t,n,o=[],i=[],c=Object(r.a)(e);!(n=c()).done;){var s=n.value;if("node"===s.type)o.push([s.name,s.schema]);else if("mark"===s.type)i.push([s.name,s.schema]);else if("component"!==s.type)throw new Error(s.name+" unknown type: "+s.type);!0===s.topNode&&(t=s.name)}return new a.Schema({topNode:t,nodes:Object.fromEntries(o),marks:Object.fromEntries(i)})}(this._spec),this._options=Object.fromEntries(this._spec.filter((function(e){return e.options})).map((function(e){return[e.name,e.options]})))}return Object(o.a)(e,[{key:"spec",get:function(){return this._spec}},{key:"schema",get:function(){return this._schema}},{key:"options",get:function(){return this._options}}]),e}();function u(e){if(!e.name)throw Object(c.b)("The spec didn't have a name field",e),new Error("Invalid spec. Spec must have a name");if(!["node","mark","component"].includes(e.type))throw Object(c.b)("The spec must be of type node, mark or component ",e),new Error("Invalid spec type");if(["node","mark"].includes(e.type)&&!e.schema)throw Object(c.b)("The spec of type 'mark' or 'node' must have a schema field",e),new Error("Invalid spec schema")}function d(e){return function e(t){return Array.isArray(t)?t.flatMap((function(t){return e(t)})).filter(Boolean):t}(e)}},164:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}));var r=n(157);function o(){return[].concat([r.bold.spec(),r.code.spec(),r.italic.spec(),r.strike.spec(),r.link.spec(),r.underline.spec()],[r.doc.spec(),r.text.spec(),r.paragraph.spec(),r.blockquote.spec(),r.bulletList.spec(),r.codeBlock.spec(),r.hardBreak.spec(),r.heading.spec(),r.horizontalRule.spec(),r.listItem.spec(),r.orderedList.spec(),r.image.spec()])}function a(){return[r.bold.plugins(),r.code.plugins(),r.italic.plugins(),r.strike.plugins(),r.link.plugins(),r.underline.plugins(),r.paragraph.plugins(),r.blockquote.plugins(),r.bulletList.plugins(),r.codeBlock.plugins(),r.hardBreak.plugins(),r.heading.plugins(),r.horizontalRule.plugins(),r.listItem.plugins(),r.orderedList.plugins(),r.image.plugins(),r.history.plugins()]}},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(4),o=n(207),a=0,i=new(function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.get=function(t){var n=e.prototype.get.call(this,t);return n||(n=(a++).toString(),this.set(t,n),n)},t}(Object(o.a)(WeakMap)))},166:function(e,t,n){"use strict";n.r(t),n.d(t,"plugins",(function(){return i})),n.d(t,"commands",(function(){return c})),n.d(t,"defaultKeys",(function(){return s})),n.d(t,"undo",(function(){return u})),n.d(t,"redo",(function(){return d}));var r=n(208),o=n(154),a=n(149),i=function(e){var t=void 0===e?{}:e,n=t.historyOpts,i=void 0===n?{}:n,c=t.keybindings,l=void 0===c?s:c;return function(){var e;return new a.b("history",[r.a(i),l&&Object(o.a)((e={},e[l.undo]=u(),e[l.redo]=d(),e))])}},c={undo:u,redo:d},s={undo:"Mod-z",redo:"Mod-y Shift-Mod-z"};function u(){return r.c}function d(){return r.b}},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(145);function o(e,t){var n=void 0===t?{}:t,o=n.tag,a=void 0===o?"div":o,i=n.content,c=n.ignoreAttrs,s=void 0===c?[]:c,u=n.parsingPriority,d=function(e){return JSON.stringify(Object(r.f)(e.attrs||{},(function(e,t){return!s.includes(t)})))};return{toDOM:function(t){var n=[a,{"data-bangle-name":e,"data-bangle-attrs":d(t)}];return void 0!==i&&("function"==typeof i?n.push(i(t)):n.push(i)),n},parseDOM:[{priority:void 0===u?51:u,tag:a+'[data-bangle-name="'+e+'"]',getAttrs:function(e){var t=e.getAttribute("data-bangle-attrs");return t?JSON.parse(t):{}}}]}}},168:function(e,t,n){"use strict";var r=n(142);n.d(t,"c",(function(){return r.Selection})),n.d(t,"a",(function(){return r.Plugin})),n.d(t,"b",(function(){return r.PluginKey}))},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"f",(function(){return l}));var r=n(162),o=n(148),a=n(143),i=function(e,t){return e.type===t.nodes.listItem&&"boolean"==typeof e.attrs.todoChecked},c=function(e,t,n,r){return i(n,t)&&(e=e.setNodeMarkup(r,void 0,Object.assign({},n.attrs,{todoChecked:null}))),e},s=function(e,t,n,r){return n.type!==t.nodes.listItem||i(n,t)||(e=e.setNodeMarkup(r,void 0,Object.assign({},n.attrs,{todoChecked:!1}))),e},u=Object(a.b)([p,function(e){return 0!==m(e).todos}],(function(e,t){var n=e.schema,r=e.tr;return f(e,(function(e,t){r=c(r,n,e,t)})),t&&t(r),!0})),d=Object(a.b)([p,function(e){var t=m(e);return t.todos!==t.lists}],(function(e,t){var n=e.tr,r=e.schema;return f(e,(function(e,t){n=s(n,r,e,t)})),t&&t(n),!0}));function l(e,t){return new o.a(e,(function(e,n,o,a){var c=e.schema.nodes.listItem,s=t instanceof Function?t(n):t,u=e.tr.delete(o,a),d=u.doc.resolve(o).blockRange(),l=d&&Object(r.h)(d,c,s);if(!l)return null;u.wrap(d,l);var f=u.doc.resolve(o-1).nodeBefore;return f&&f.type===e.schema.nodes.bulletList&&Object(r.e)(u.doc,o-1)&&f.lastChild&&i(f.lastChild,e.schema)&&u.join(o-1),u}))}function f(e,t){var n=e.schema,r=e.selection,o=r.$from,a=r.$to,i=o.blockRange(a,(function(e){return e.childCount&&e.firstChild.type===n.nodes.listItem}));if(i)for(var c=i.parent,s=i.startIndex,u=i.endIndex,d=i.$from.start(i.depth),l=0;l<c.childCount;l++){var f=c.child(l);t(f,d),l>=s&&l<u-1&&f.nodesBetween(0,f.content.size,t,d+1),d+=f.nodeSize}}function p(e){var t=e.selection,n=t.$from.node(-2),r=t.$to.node(-2);return n&&n.type===e.schema.nodes.bulletList&&r&&r.type===e.schema.nodes.bulletList}function m(e){var t=0,n=0,r=e.schema;return f(e,(function(e,o){e.type===r.nodes.listItem&&t++,i(e,r)&&n++})),{lists:t,todos:n}}},170:function(e,t,n){"use strict";n.r(t),n.d(t,"plugins",(function(){return a})),n.d(t,"docChangedKey",(function(){return i})),n.d(t,"selectionChangedKey",(function(){return c}));var r=n(149),o="editorStateCounter",a=function(){return function(){return new r.b(o,[new r.a({key:i,state:{init:function(e,t){return 0},apply:function(e,t,n,r){return e.docChanged?t+1:t}}}),new r.a({key:c,state:{init:function(e,t){return 0},apply:function(e,t,n,r){return r.selection.eq(n&&n.selection)?t:t+1}}})])}},i=new r.c(o),c=new r.c(o)},171:function(e,t,n){"use strict";n.d(t,"f",(function(){return y})),n.d(t,"c",(function(){return w})),n.d(t,"e",(function(){return k})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return x})),n.d(t,"d",(function(){return S})),n.d(t,"g",(function(){return A}));var r=n(158),o=n(162),a=n(204),i=n(144),c=n(147),s=n(159),u=n(142),d=n(145),l=n(143),f=n(183);function p(e,t,n,r){var a=n.$from,i=n.$to,s=e;s||(s=t.schema.nodes.listItem);var u=a.blockRange(i,(function(e){return!!e.childCount&&!!e.firstChild&&e.firstChild.type===s}));if(!u||u.depth<2||a.node(u.depth-1).type!==s)return r;var d=u.end,l=i.end(u.depth);return d<l&&(r.step(new o.b(d-1,l,d,l,new c.Slice(c.Fragment.from(s.create(void 0,u.parent.copy())),1,0),1,!0)),u=new c.NodeRange(r.doc.resolve(a.pos),r.doc.resolve(l),u.depth)),r.lift(u,Object(o.j)(u)).scrollIntoView()}var m=n(169),h=function(e,t){for(var n=t.bulletList,r=t.orderedList,o=0,a=e.depth-1;a>0;a--){var i=e.node(a);i.type!==n&&i.type!==r||(o+=1)}return o},b=function(e){return function(t){var n=t.selection.$from.parent,r=e;r||(r=t.schema.nodes.listItem);var o=t.schema.nodes.paragraph;return t.selection instanceof f.a?n.type===r:n.type===o&&Object(s.hasParentNodeOfType)(r)(t.selection)}};var g=function(e){return function(t){var n=t.selection.$from,r=e;r||(r=t.schema.nodes.listItem);var o=t.schema.nodes.paragraph;return t.selection instanceof f.a?n.parent.type===r:Object(s.hasParentNodeOfType)(r)(t.selection)&&n.parent.type===o}};function v(e){var t=e.selection.$from,n=e.schema.nodes,r=n.bulletList,o=n.orderedList,a=e.doc.resolve(t.pos-1),i=a?a.nodeBefore:null;return e.selection instanceof f.a&&(i=t.nodeBefore),!!i&&[r,o].indexOf(i.type)>-1}function y(e,t,n){return function(r,o,c){var s=r.selection,d=s.$from.node(s.$from.depth-2),f=s.$to.node(s.$to.depth-2);if(d&&d.type.name===e.name&&f&&f.type.name===e.name){var h=t||r.schema.nodes.listItem,b=function(e,t,n){for(var r,o=e,a=n.bulletList,i=n.orderedList,c=t.depth-1;c>0;c--){var s=t.node(c);if(s.type!==a&&s.type!==i||(r=c),s.type!==a&&s.type!==i&&s.type!==o)break}return r}(h,s.$to,r.schema.nodes),g=s.$to.pos;s instanceof u.NodeSelection&&s.node.type===h&&(g=s.$from.pos+s.node.firstChild.content.size);var v=r.tr,y=function(e,t,n,r,o,a){var i=e;i||(i=t.schema.nodes.listItem);var c=!1;return a.doc.nodesBetween(n,r,(function(e,r){if(!c&&e.type===i&&r>n){c=!0;for(var s=o+3;s>o+2;){var d=a.doc.resolve(a.mapping.map(r));s=d.depth;var l=a.doc.resolve(a.mapping.map(r+e.content.size)),f=new u.TextSelection(d,l);a=p(i,t,f,a)}}})),a}(h,r,g,s.$to.end(b),b||0,v);return y=function(e,t,n){var r=t.selection,o=r.from,a=r.to,i=t.schema.nodes.paragraph,c=[];n.doc.nodesBetween(o,a,(function(e,t){e.type===i&&c.push({node:e,pos:t})}));for(var s=c.length-1;s>=0;s--){var u=c[s],d=n.doc.resolve(n.mapping.map(u.pos));if(d.depth>0){var f=void 0;f=u.node.textContent&&u.node.textContent.length>0?n.doc.resolve(n.mapping.map(u.pos+u.node.textContent.length)):n.doc.resolve(n.mapping.map(u.pos+1));var p=d.blockRange(f);p&&n.lift(p,Object(l.f)(e,t.schema,d))}}return n}(h,r,y),o&&o(y),!0}return function(e,t){void 0===t&&(t=!1);var n=function(e){return function(t){if(!t.isGeneric)return t;for(var n=[],r=0;r<t.mapping.maps.length;r++){for(var o=t.mapping.maps[r],a=0;a<n.length;a++)n[a]=o.map(n[a]);o.forEach((function(e,t,r,o){n.push(r,o)}))}for(var i=function(t,n){return t.type===e.nodes.listItem&&n.type===e.nodes.bulletList},c=function(r){var o=n[r],a=n[r+1];t.doc.nodesBetween(o,a,(function(n,r,c){r>=o&&r<a&&i(n,c)&&Object(m.e)(t,e,n,r)}))},s=0;s<n.length;s+=2)c(s);return t}};return function(r,o,c){if(o&&o(r.tr.setSelection(function(e,t){var n=t.$from,r=t.$to,o=n.pos===r.pos,a=n.pos,i=r.pos;if(o&&a===e.nodeSize-3)return t;if(n.nodeBefore&&!o){a++;for(var c=e.nodeAt(a);!c||c&&!c.isText;)a++,c=e.nodeAt(a)}if(i===a)return new u.TextSelection(e.resolve(a));return new u.TextSelection(e.resolve(a),e.resolve(i))}(r.doc,r.selection))),!c)return!1;var s=(r=c.state).selection,d=s.$from,f=s.$to,p=Object(l.n)(r.doc,d,f,e);if(function(e,t){var n=e.selection.$from,r=n.node(-2),o=n.node(-3);return r&&r.type===t||o&&o.type===t}(r,e)&&p)return O()(r,o);p||(O()(r,o),r=c.state);var m,h,b=Object(l.r)(r,e);return b&&o&&(o(b),r=c.state),(m=e,i.a(a.c(m,h),(function(e,t){return e.type===t.type&&e.type===m})))(r,t?Object(l.a)(o,n(r.schema)):o)}}(e,n)(r,o,c)}}function O(){return function(e,t){var n=e.tr,r=e.selection,a=r.$from,i=r.$to;return n.doc.nodesBetween(a.pos,i.pos,(function(t,r){if(t.isTextblock){var a=new u.NodeSelection(n.doc.resolve(n.mapping.map(r))),i=a.$from.blockRange(a.$to);if(!i||![e.schema.nodes.listItem].includes(a.$from.parent.type))return!1;var c=i&&Object(o.j)(i);if(null==c)return!1;n.lift(i,c)}})),t&&t(n),!0}}function w(e){return function(t,n){var r,o=e;return o||(o=t.schema.nodes.listItem),!!g(o)(t)&&(function(e,t){var n,r=t.tr.selection.$to.pos;do{var o=t.doc.resolve(r);if((n=h(o,t.schema.nodes))>4)return!1;r++}while(n>=e);return!0}(h(t.selection.$from,t.schema.nodes),t)&&a.b(o)(t,Object(l.a)(n,(r=t.schema,function(e){if(!e.isGeneric)return e;var t=e.selection.$from.blockRange(e.selection.$to,(function(e){return e.childCount&&e.firstChild.type===r.nodes.listItem}));if(!t||0===t.startIndex)return e;for(var n=Object(m.a)(t.parent.child(t.startIndex-1),r),o=t.parent,a=t.startIndex,i=t.endIndex,c=0,s=a;s<i;s++){var u=o.child(s),d=t.start+c;e=n?Object(m.e)(e,r,u,d):Object(m.c)(e,r,u,d),c+=u.nodeSize}return e}))),!0)}}function k(e){return function(t,n,o){var i=e;i||(i=t.schema.nodes.listItem);var c=t.selection,u=c.$from,l=c.$to;if(!g(i)(t))return!1;var f=u.blockRange(l,(function(e){return e.childCount>0&&e.firstChild.type===i}));if(!f)return!1;var p=Object(m.a)(t.selection.$from.node(-3),t.schema);if(n&&o){for(var h,b=t.selection.$from.node(-2),v=t.selection.$from.start(-2),y=t.tr,O=Object(r.a)(Object(s.flatten)(b,!1));!(h=O()).done;){var w=h.value,k=w.node,j=w.pos+v;j>=t.selection.$from.before(-1)&&j<t.selection.$to.after(-1)&&(p?Object(m.e)(y,t.schema,k,j):Object(m.c)(y,t.schema,k,j))}n(y),t=o.state}return Object(d.c)(function(e,t){return function(n){return function(r,o,a){var i=function(n){var a=r.doc.resolve(t.start),i=r.doc.resolve(t.end),c=n.doc.resolve(n.mapping.map(t.end-1));c.nodeBefore&&c.nodeAfter&&c.nodeBefore.type===c.nodeAfter.type&&i.nodeAfter&&i.nodeAfter.type===e&&i.parent.type===a.parent.type&&n.join(c.pos),o&&o(n.scrollIntoView())};return n(r,i,a)}}}(i,f),a.a)(i)(t,n,o)}}var j=function(e){return function(){return i.c(Object(l.b)([g(e),l.j,l.k,b(e)],i.c(M(e),k(e))),Object(l.b)([l.j,v],C(e))).apply(void 0,arguments)}};function x(e){return function(t,n,r){var o,a,i=t.selection;if(i.empty){var u=i.$from,d=e;d||(d=t.schema.nodes.listItem);var f=t.schema.nodes.codeBlock,p=u.node(u.depth),h=u.node(u.depth-1);if(h&&h.type===d){var b=Object(l.h)(h);if(Object(l.m)(p)&&!b){var g=u.node(u.depth-3);return Object(m.a)(g,t.schema)&&!Object(m.a)(h,t.schema)?k(t.schema.nodes.listItem)(t,n,r):k(d)(t,n,r)}if(!Object(s.hasParentNodeOfType)(f)(i))return(o=d,a=function(e){return Object(m.a)(e,t.schema)?Object.assign({},e.attrs,{todoChecked:!1}):e.attrs},function(e,t){var n=e.selection,r=n.$from,i=n.$to,s=n.node;if(s&&s.isBlock||r.depth<2||!r.sameParent(i))return!1;var u=r.node(-1);if(u.type!==o)return!1;if(u.content.content.length<=1&&0===r.parent.content.size&&0!==u.content.size){if(2===r.depth||r.node(-3).type!==o||r.index(-2)!==r.node(-2).childCount-1)return!1;if(t){for(var d=c.Fragment.empty,l=r.index(-1)>0,f=r.depth-(l?1:2);f>=r.depth-3;f--)d=c.Fragment.from(r.node(f).copy(d));d=d.append(c.Fragment.from(o.createAndFill()));var p=e.tr.replace(r.before(l?void 0:-1),r.after(-3),new c.Slice(d,l?3:2,2));p.setSelection(e.selection.constructor.near(p.doc.resolve(r.pos+(l?3:2)))),t(p.scrollIntoView())}return!0}var m=i.pos===r.end()?u.contentMatchAt(0).defaultType:void 0,h=e.tr.delete(r.pos,i.pos),b=[a?{type:o,attrs:a(u)}:void 0,m&&{type:m}];return t&&t(h.split(r.pos,2,b).scrollIntoView()),!0})(t,n)}}return!1}}function C(e){return function(t,n){var r=e;r||(r=t.schema.nodes.listItem);var a=t.selection.$from,i=t.schema.nodes,u=i.paragraph,d=i.codeBlock,p=i.heading,m=i.bulletList,h=i.orderedList,b=t.selection instanceof f.a,g=b?t.doc.resolve(a.pos+1):a,v=Object(l.c)(g);if(!v)return!1;if(v.nodeBefore&&[m,h].indexOf(v.nodeBefore.type)>-1&&v.nodeAfter&&[u,d,p].indexOf(v.nodeAfter.type)>-1){for(var y=v.doc.resolve(v.pos-1);y.parent.type!==u;)y=t.doc.resolve(y.pos-1);var O=t.tr;if(b){var w=Object(s.findPositionOfNodeBefore)(O.selection);if("number"!=typeof w)return!1;var k=v.nodeBefore.copy(v.nodeBefore.content.append(c.Fragment.from(r.createChecked({},v.nodeAfter))));O.replaceWith(w,a.pos+v.nodeAfter.nodeSize,k)}else O=O.step(new o.b(y.pos,v.pos+v.nodeAfter.nodeSize,v.pos+1,v.pos+v.nodeAfter.nodeSize-1,t.tr.doc.slice(y.pos,v.pos),0,!0));var j=O.doc.resolve(O.mapping.map(v.pos+v.nodeAfter.nodeSize));return j.nodeBefore&&j.nodeAfter&&j.nodeBefore.type===j.nodeAfter.type&&[m,h].indexOf(j.nodeBefore.type)>-1&&(O=O.join(j.pos)),n&&n(O.scrollIntoView()),!0}return!1}}function M(e){return function(t,n){var r=t.selection.$from,o=e;o||(o=t.schema.nodes.listItem);var a=Object(l.c)(r);if(!a||!a.nodeBefore||a.nodeBefore.type!==o)return!1;if(1===a.nodeBefore.childCount&&a.nodeBefore.firstChild.nodeSize<=2){var i=t.tr;return n&&n(i.delete(a.pos-a.nodeBefore.nodeSize,r.pos).scrollIntoView()),!0}return!1}}function S(e,t){void 0===t&&(t="UP");var n="DOWN"===t;return Object(l.b)([function(t){var r=Object(s.findParentNodeOfType)(e)(t.selection);if(!r)return!1;var o=r.node,a=t.selection.$from.node(r.depth-1),i=a&&a[n?"lastChild":"firstChild"];return!(!o||i!==o)}],(function(t,r,o){var a=e;if(a||(a=t.schema.nodes.listItem),!t.selection.empty)return!1;var i=Object(s.findParentNode)((function(e){return Object(l.t)(e.type,t.schema.nodes)}))(t.selection),c=Object(s.findParentNodeOfType)(a)(t.selection);if(!(i&&i.node&&c&&c.node))return!1;if(3===t.selection.$from.depth)return k(a)(t,r,o);var u=1===i.node.childCount?i:c,d=t.tr.delete(u.pos,u.pos+u.node.nodeSize),f=t.selection.$from.before(-3);if(n){var p=t.selection.$from.after(-3);f=p-u.node.nodeSize;var m=Object(l.u)(p,t.doc)&&t.doc.nodeAt(p);m&&m.type===a&&(f+=m.nodeSize)}var h=c.node,b=Object(s.safeInsert)(h,f)(d);return b!==d&&(r&&r(b),!0)}))}function A(e,t){return function(n,r){var o=n.selection.$from,a=o.node(-1);if(a&&a.type===e){var i=n.tr,c=o.before(-1);if(t(a.attrs)!==a.attrs)return i.setNodeMarkup(c,void 0,t(a.attrs)),r(i),!0}return!1}}},172:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return c})),n.d(t,"plugins",(function(){return s})),n.d(t,"commands",(function(){return u})),n.d(t,"URL_REGEX",(function(){return l})),n.d(t,"createLink",(function(){return b})),n.d(t,"updateLink",(function(){return g})),n.d(t,"queryLinkAttrs",(function(){return v})),n.d(t,"queryIsLinkAllowedInRange",(function(){return y})),n.d(t,"queryIsLinkActive",(function(){return O})),n.d(t,"queryIsSelectionAroundLink",(function(){return w}));var r=n(148),o=n(142),a=n(145),i=n(143),c=function(e){var t=(void 0===e?{}:e).openOnClick;return{type:"mark",name:d,schema:{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(e){return{href:e.getAttribute("href")}}}],toDOM:function(e){return["a",Object.assign({},e.attrs,{rel:"noopener noreferrer nofollow"}),0]}},markdown:{toMarkdown:{open:function(e,t,n,r){return m(t,n,r,1)?"<":"["},close:function(e,t,n,r){return m(t,n,r,-1)?">":"]("+e.esc(t.attrs.href)+(t.attrs.title?" "+e.quote(t.attrs.title):"")+")"}},parseMarkdown:{link:{mark:"link",getAttrs:function(e){return{href:e.attrGet("href"),title:e.attrGet("title")||null}}}}},options:{openOnClick:void 0!==t&&t}}},s=function(){return function(e){var t,n=e.schema,r=e.specRegistry.options.link.openOnClick,c=function(e){return e.marks.link}(n);return[f(c),(t=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,new o.Plugin({props:{handlePaste:function(e,n,r){var o=n;if(!o.clipboardData)return!1;var i=o.clipboardData.getData("text/plain"),c=o.clipboardData.getData("text/html"),s=i&&!c;if(!s||e.state.selection.empty)return!1;var u=e.state,d=e.dispatch,l=Object(a.e)(t,i),f=1===l.length&&l.every((function(e){return e.match}));return!!f&&b(i)(u,d)}}})),p(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,c,(function(e){return{href:e}})),r&&new o.Plugin({props:{handleClick:function(e,t,n){var r=e.state.schema,o=Object(i.g)(e.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href))}}})]}},u={createLink:b,updateLink:g,queryLinkAttrs:v,queryIsLinkAllowedInRange:y,queryIsLinkActive:O,queryIsSelectionAroundLink:w},d="link";var l=/(^|\s)(((http|https|ftp):\/\/)?(?:[^\s.:\/]+\.)+(?:aaa|aarp|abarth|abb|abbott|abbvie|abc|able|abogado|abudhabi|ac|academy|accenture|accountant|accountants|aco|actor|ad|adac|ads|adult|ae|aeg|aero|aetna|af|afamilycompany|afl|africa|ag|agakhan|agency|ai|aig|airbus|airforce|airtel|akdn|al|alfaromeo|alibaba|alipay|allfinanz|allstate|ally|alsace|alstom|am|amazon|americanexpress|americanfamily|amex|amfam|amica|amsterdam|analytics|android|anquan|anz|ao|aol|apartments|app|apple|aq|aquarelle|ar|arab|aramco|archi|army|arpa|art|arte|as|asda|asia|associates|at|athleta|attorney|au|auction|audi|audible|audio|auspost|author|auto|autos|avianca|aw|aws|ax|axa|az|azure|ba|baby|baidu|banamex|bananarepublic|band|bank|bar|barcelona|barclaycard|barclays|barefoot|bargains|baseball|basketball|bauhaus|bayern|bb|bbc|bbt|bbva|bcg|bcn|bd|be|beats|beauty|beer|bentley|berlin|best|bestbuy|bet|bf|bg|bh|bharti|bi|bible|bid|bike|bing|bingo|bio|biz|bj|black|blackfriday|blockbuster|blog|bloomberg|blue|bm|bms|bmw|bn|bnpparibas|bo|boats|boehringer|bofa|bom|bond|boo|book|booking|bosch|bostik|boston|bot|boutique|box|br|bradesco|bridgestone|broadway|broker|brother|brussels|bs|bt|budapest|bugatti|build|builders|business|buy|buzz|bv|bw|by|bz|bzh|ca|cab|cafe|cal|call|calvinklein|cam|camera|camp|cancerresearch|canon|capetown|capital|capitalone|car|caravan|cards|care|career|careers|cars|casa|case|cash|casino|cat|catering|catholic|cba|cbn|cbre|cbs|cc|cd|center|ceo|cern|cf|cfa|cfd|cg|ch|chanel|channel|charity|chase|chat|cheap|chintai|christmas|chrome|church|ci|cipriani|circle|cisco|citadel|citi|citic|city|cityeats|ck|cl|claims|cleaning|click|clinic|clinique|clothing|cloud|club|clubmed|cm|cn|co|coach|codes|coffee|college|cologne|com|comcast|commbank|community|company|compare|computer|comsec|condos|construction|consulting|contact|contractors|cooking|cookingchannel|cool|coop|corsica|country|coupon|coupons|courses|cpa|cr|credit|creditcard|creditunion|cricket|crown|crs|cruise|cruises|csc|cu|cuisinella|cv|cw|cx|cy|cymru|cyou|cz|dabur|dad|dance|data|date|dating|datsun|day|dclk|dds|de|deal|dealer|deals|degree|delivery|dell|deloitte|delta|democrat|dental|dentist|desi|design|dev|dhl|diamonds|diet|digital|direct|directory|discount|discover|dish|diy|dj|dk|dm|dnp|do|docs|doctor|dog|domains|dot|download|drive|dtv|dubai|duck|dunlop|dupont|durban|dvag|dvr|dz|earth|eat|ec|eco|edeka|edu|education|ee|eg|email|emerck|energy|engineer|engineering|enterprises|epson|equipment|er|ericsson|erni|es|esq|estate|et|etisalat|eu|eurovision|eus|events|exchange|expert|exposed|express|extraspace|fage|fail|fairwinds|faith|family|fan|fans|farm|farmers|fashion|fast|fedex|feedback|ferrari|ferrero|fi|fiat|fidelity|fido|film|final|finance|financial|fire|firestone|firmdale|fish|fishing|fit|fitness|fj|fk|flickr|flights|flir|florist|flowers|fly|fm|fo|foo|food|foodnetwork|football|ford|forex|forsale|forum|foundation|fox|fr|free|fresenius|frl|frogans|frontdoor|frontier|ftr|fujitsu|fun|fund|furniture|futbol|fyi|ga|gal|gallery|gallo|gallup|game|games|gap|garden|gay|gb|gbiz|gd|gdn|ge|gea|gent|genting|george|gf|gg|ggee|gh|gi|gift|gifts|gives|giving|gl|glade|glass|gle|global|globo|gm|gmail|gmbh|gmo|gmx|gn|godaddy|gold|goldpoint|golf|goo|goodyear|goog|google|gop|got|gov|gp|gq|gr|grainger|graphics|gratis|green|gripe|grocery|group|gs|gt|gu|guardian|gucci|guge|guide|guitars|guru|gw|gy|hair|hamburg|hangout|haus|hbo|hdfc|hdfcbank|health|healthcare|help|helsinki|here|hermes|hgtv|hiphop|hisamitsu|hitachi|hiv|hk|hkt|hm|hn|hockey|holdings|holiday|homedepot|homegoods|homes|homesense|honda|horse|hospital|host|hosting|hot|hoteles|hotels|hotmail|house|how|hr|hsbc|ht|hu|hughes|hyatt|hyundai|ibm|icbc|ice|icu|id|ie|ieee|ifm|ikano|il|im|imamat|imdb|immo|immobilien|in|inc|industries|infiniti|info|ing|ink|institute|insurance|insure|int|international|intuit|investments|io|ipiranga|iq|ir|irish|is|ismaili|ist|istanbul|it|itau|itv|jaguar|java|jcb|je|jeep|jetzt|jewelry|jio|jll|jm|jmp|jnj|jo|jobs|joburg|jot|joy|jp|jpmorgan|jprs|juegos|juniper|kaufen|kddi|ke|kerryhotels|kerrylogistics|kerryproperties|kfh|kg|kh|ki|kia|kim|kinder|kindle|kitchen|kiwi|km|kn|koeln|komatsu|kosher|kp|kpmg|kpn|kr|krd|kred|kuokgroup|kw|ky|kyoto|kz|la|lacaixa|lamborghini|lamer|lancaster|lancia|land|landrover|lanxess|lasalle|lat|latino|latrobe|law|lawyer|lb|lc|lds|lease|leclerc|lefrak|legal|lego|lexus|lgbt|li|lidl|life|lifeinsurance|lifestyle|lighting|like|lilly|limited|limo|lincoln|linde|link|lipsy|live|living|lixil|lk|llc|llp|loan|loans|locker|locus|loft|lol|london|lotte|lotto|love|lpl|lplfinancial|lr|ls|lt|ltd|ltda|lu|lundbeck|luxe|luxury|lv|ly|ma|macys|madrid|maif|maison|makeup|man|management|mango|map|market|marketing|markets|marriott|marshalls|maserati|mattel|mba|mc|mckinsey|md|me|med|media|meet|melbourne|meme|memorial|men|menu|merckmsd|mg|mh|miami|microsoft|mil|mini|mint|mit|mitsubishi|mk|ml|mlb|mls|mm|mma|mn|mo|mobi|mobile|moda|moe|moi|mom|monash|money|monster|mormon|mortgage|moscow|moto|motorcycles|mov|movie|mp|mq|mr|ms|msd|mt|mtn|mtr|mu|museum|mutual|mv|mw|mx|my|mz|na|nab|nagoya|name|natura|navy|nba|nc|ne|nec|net|netbank|netflix|network|neustar|new|news|next|nextdirect|nexus|nf|nfl|ng|ngo|nhk|ni|nico|nike|nikon|ninja|nissan|nissay|nl|no|nokia|northwesternmutual|norton|now|nowruz|nowtv|np|nr|nra|nrw|ntt|nu|nyc|nz|obi|observer|off|office|okinawa|olayan|olayangroup|oldnavy|ollo|om|omega|one|ong|onl|online|ooo|open|oracle|orange|org|organic|origins|osaka|otsuka|ott|ovh|pa|page|panasonic|paris|pars|partners|parts|party|passagens|pay|pccw|pe|pet|pf|pfizer|pg|ph|pharmacy|phd|philips|phone|photo|photography|photos|physio|pics|pictet|pictures|pid|pin|ping|pink|pioneer|pizza|pk|pl|place|play|playstation|plumbing|plus|pm|pn|pnc|pohl|poker|politie|porn|post|pr|pramerica|praxi|press|prime|pro|prod|productions|prof|progressive|promo|properties|property|protection|pru|prudential|ps|pt|pub|pw|pwc|py|qa|qpon|quebec|quest|qvc|racing|radio|raid|re|read|realestate|realtor|realty|recipes|red|redstone|redumbrella|rehab|reise|reisen|reit|reliance|ren|rent|rentals|repair|report|republican|rest|restaurant|review|reviews|rexroth|rich|richardli|ricoh|ril|rio|rip|rmit|ro|rocher|rocks|rodeo|rogers|room|rs|rsvp|ru|rugby|ruhr|run|rw|rwe|ryukyu|sa|saarland|safe|safety|sakura|sale|salon|samsclub|samsung|sandvik|sandvikcoromant|sanofi|sap|sarl|sas|save|saxo|sb|sbi|sbs|sc|sca|scb|schaeffler|schmidt|scholarships|school|schule|schwarz|science|scjohnson|scot|sd|se|search|seat|secure|security|seek|select|sener|services|ses|seven|sew|sex|sexy|sfr|sg|sh|shangrila|sharp|shaw|shell|shia|shiksha|shoes|shop|shopping|shouji|show|showtime|si|silk|sina|singles|site|sj|sk|ski|skin|sky|skype|sl|sling|sm|smart|smile|sn|sncf|so|soccer|social|softbank|software|sohu|solar|solutions|song|sony|soy|spa|space|sport|spot|sr|srl|ss|st|stada|staples|star|statebank|statefarm|stc|stcgroup|stockholm|storage|store|stream|studio|study|style|su|sucks|supplies|supply|support|surf|surgery|suzuki|sv|swatch|swiftcover|swiss|sx|sy|sydney|systems|sz|tab|taipei|talk|taobao|target|tatamotors|tatar|tattoo|tax|taxi|tc|tci|td|tdk|team|tech|technology|tel|temasek|tennis|teva|tf|tg|th|thd|theater|theatre|tiaa|tickets|tienda|tiffany|tips|tires|tirol|tj|tjmaxx|tjx|tk|tkmaxx|tl|tm|tmall|tn|to|today|tokyo|tools|top|toray|toshiba|total|tours|town|toyota|toys|tr|trade|trading|training|travel|travelchannel|travelers|travelersinsurance|trust|trv|tt|tube|tui|tunes|tushu|tv|tvs|tw|tz|ua|ubank|ubs|ug|uk|unicom|university|uno|uol|ups|us|uy|uz|va|vacations|vana|vanguard|vc|ve|vegas|ventures|verisign|versicherung|vet|vg|vi|viajes|video|vig|viking|villas|vin|vip|virgin|visa|vision|viva|vivo|vlaanderen|vn|vodka|volkswagen|volvo|vote|voting|voto|voyage|vu|vuelos|wales|walmart|walter|wang|wanggou|watch|watches|weather|weatherchannel|webcam|weber|website|wed|wedding|weibo|weir|wf|whoswho|wien|wiki|williamhill|win|windows|wine|winners|wme|wolterskluwer|woodside|work|works|world|wow|ws|wtc|wtf|xbox|xerox|xfinity|xihuan|xin|xn--11b4c3d|xn--1ck2e1b|xn--1qqw23a|xn--2scrj9c|xn--30rr7y|xn--3bst00m|xn--3ds443g|xn--3e0b707e|xn--3hcrj9c|xn--3oq18vl8pn36a|xn--3pxu8k|xn--42c2d9a|xn--45br5cyl|xn--45brj9c|xn--45q11c|xn--4dbrk0ce|xn--4gbrim|xn--54b7fta0cc|xn--55qw42g|xn--55qx5d|xn--5su34j936bgsg|xn--5tzm5g|xn--6frz82g|xn--6qq986b3xl|xn--80adxhks|xn--80ao21a|xn--80aqecdr1a|xn--80asehdb|xn--80aswg|xn--8y0a063a|xn--90a3ac|xn--90ae|xn--90ais|xn--9dbq2a|xn--9et52u|xn--9krt00a|xn--b4w605ferd|xn--bck1b9a5dre4c|xn--c1avg|xn--c2br7g|xn--cck2b3b|xn--cckwcxetd|xn--cg4bki|xn--clchc0ea0b2g2a9gcd|xn--czr694b|xn--czrs0t|xn--czru2d|xn--d1acj3b|xn--d1alf|xn--e1a4c|xn--eckvdtc9d|xn--efvy88h|xn--fct429k|xn--fhbei|xn--fiq228c5hs|xn--fiq64b|xn--fiqs8s|xn--fiqz9s|xn--fjq720a|xn--flw351e|xn--fpcrj9c3d|xn--fzc2c9e2c|xn--fzys8d69uvgm|xn--g2xx48c|xn--gckr3f0f|xn--gecrj9c|xn--gk3at1e|xn--h2breg3eve|xn--h2brj9c|xn--h2brj9c8c|xn--hxt814e|xn--i1b6b1a6a2e|xn--imr513n|xn--io0a7i|xn--j1aef|xn--j1amh|xn--j6w193g|xn--jlq480n2rg|xn--jlq61u9w7b|xn--jvr189m|xn--kcrx77d1x4a|xn--kprw13d|xn--kpry57d|xn--kput3i|xn--l1acc|xn--lgbbat1ad8j|xn--mgb9awbf|xn--mgba3a3ejt|xn--mgba3a4f16a|xn--mgba7c0bbn0a|xn--mgbaakc7dvf|xn--mgbaam7a8h|xn--mgbab2bd|xn--mgbah1a3hjkrd|xn--mgbai9azgqp6j|xn--mgbayh7gpa|xn--mgbbh1a|xn--mgbbh1a71e|xn--mgbc0a9azcg|xn--mgbca7dzdo|xn--mgbcpq6gpa1a|xn--mgberp4a5d4ar|xn--mgbgu82a|xn--mgbi4ecexp|xn--mgbpl2fh|xn--mgbt3dhd|xn--mgbtx2b|xn--mgbx4cd0ab|xn--mix891f|xn--mk1bu44c|xn--mxtq1m|xn--ngbc5azd|xn--ngbe9e0a|xn--ngbrx|xn--node|xn--nqv7f|xn--nqv7fs00ema|xn--nyqy26a|xn--o3cw4h|xn--ogbpf8fl|xn--otu796d|xn--p1acf|xn--p1ai|xn--pgbs0dh|xn--pssy2u|xn--q7ce6a|xn--q9jyb4c|xn--qcka1pmc|xn--qxa6a|xn--qxam|xn--rhqv96g|xn--rovu88b|xn--rvc1e0am3e|xn--s9brj9c|xn--ses554g|xn--t60b56a|xn--tckwe|xn--tiq49xqyj|xn--unup4y|xn--vermgensberater-ctb|xn--vermgensberatung-pwb|xn--vhquv|xn--vuq861b|xn--w4r85el8fhu5dnra|xn--w4rs40l|xn--wgbh1c|xn--wgbl6a|xn--xhq521b|xn--xkc2al3hye2a|xn--xkc2dl3a5ee0h|xn--y9a3aq|xn--yfro4i67o|xn--ygbi2ammx|xn--zfr164b|xxx|xyz|yachts|yahoo|yamaxun|yandex|ye|yodobashi|yoga|yokohama|you|youtube|yt|yun|za|zappos|zara|zero|zip|zm|zone|zuerich|zw))\s$/;function f(e){return new r.a(l,(function(t,n,r,o){if(!n[0])return null;n[0];var a=n[1],i=n[2],c=n[3];if(!a){var s=!1;if(t.doc.nodesBetween(r,o,(function(t){return!s&&(!e.isInSet(t.marks)||(s=!0,!1))})),s)return null}var u=c?i:"http://"+i,d=t.tr;return d.addMark(a.length>0?r+1:r,o,e.create({href:u})),d.insertText(" ",o),d}))}function p(e,t,n){return new o.Plugin({props:{transformPasted:function(r){return Object(i.p)(r,(function(r){if(!r.isText)return r;var o=r.text;return Object(a.e)(e,o).map((function(e){var o=e.start,a=e.end,i=e.match,c=e.subString,s=r.cut(o,a);if(i){var u=n instanceof Function?n(c):n;s=s.mark(t.create(u).addToSet(r.marks))}return s}))}))}}})}function m(e,t,n,r){if(e.attrs.title||!/^\w+:/.test(e.attrs.href))return!1;var o=t.child(n+(r<0?-1:0));if(!o.isText||o.text!==e.attrs.href||o.marks[o.marks.length-1]!==e)return!1;if(n===(r<0?1:t.childCount-1))return!0;var a=t.child(n+(r<0?-2:1));return!e.isInSet(a.marks)}function h(e,t,n){return n=n&&n.trim(),Object(i.b)((function(t){return(n=e,function(e){var t=e.doc.nodeAt(n);return!!t&&t.isText})(t);var n}),(function(r,o){var a=r.schema.marks.link,i=r.tr.removeMark(e,t,a);if(n){var c=r.schema.marks.link.create({href:n});i.addMark(e,t,c)}return o&&o(i),!0}))}function b(e){return Object(i.b)((function(e){return y(e.selection.$from.pos,e.selection.$to.pos)(e)}),(function(t,n){var r=[t.selection.$from.pos,t.selection.$to.pos],o=r[0],a=r[1],i=t.schema.marks.link,c=t.tr.removeMark(o,a,i);if(e.trim()){var s=t.schema.marks.link.create({href:e});c.addMark(o,a,s)}return n&&n(c),!0}))}function g(e){return function(t,n){if(!t.selection.empty)return h(t.selection.$from.pos,t.selection.$to.pos,e)(t,n);var r=t.selection.$from,o=r.pos-r.textOffset,a=t.doc.nodeAt(o),i=o;return a&&(i+=a.nodeSize),h(o,i,e)(t,n)}}function v(){return function(e){var t=e.selection.$from,n=t.pos-t.textOffset,r=e.doc.resolve(n),o=e.doc.nodeAt(n),a=r.nodeAfter;if(a){var i=e.schema.marks.link.isInSet(a.marks||[]);return i?{href:i.attrs.href,text:o.textContent}:void 0}}}function y(e,t){return function(n){var r=n.doc.resolve(e),o=n.doc.resolve(t),a=n.schema.marks.link;if(r.parent===o.parent&&r.parent.isTextblock)return r.parent.type.allowsMarkType(a)}}function O(){return function(e){return!!e.doc.type.schema.marks.link.isInSet(e.selection.$from.marks())}}function w(){return function(e){var t=e.selection,n=t.$from,r=t.$to,o=n.nodeAfter;return!!o&&0===n.textOffset&&r.pos-n.pos===o.nodeSize&&!!e.doc.type.schema.marks.link.isInSet(o.marks)}}},174:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return p})),n.d(t,"plugins",(function(){return m})),n.d(t,"commands",(function(){return h})),n.d(t,"defaultKeys",(function(){return b})),n.d(t,"toggleHeading",(function(){return k})),n.d(t,"queryIsHeadingActive",(function(){return j})),n.d(t,"queryIsCollapseActive",(function(){return x})),n.d(t,"collapseHeading",(function(){return C})),n.d(t,"uncollapseHeading",(function(){return M})),n.d(t,"insertEmptyParaAbove",(function(){return S})),n.d(t,"insertEmptyParaBelow",(function(){return A})),n.d(t,"toggleHeadingCollapse",(function(){return E})),n.d(t,"uncollapseAllHeadings",(function(){return N})),n.d(t,"listCollapsedHeading",(function(){return D})),n.d(t,"listCollapsibleHeading",(function(){return I})),n.d(t,"flattenFragmentJSON",(function(){return P}));var r=n(158),o=n(144),a=n(148),i=n(159),c=n(147),s=n(142),u=n(154),d=n(150),l=n(143),f=n(151),p=function(e){var t=(void 0===e?{}:e).levels,n=void 0===t?v:t;if(n.some((function(e){return"number"!=typeof e})))throw new Error("levels must be number");return{type:"node",name:g,schema:{attrs:{level:{default:1},collapseContent:{default:null}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:n.map((function(e){return{tag:"h"+e,getAttrs:function(t){var n={level:w(e)},r=t.getAttribute("data-bangle-attrs");if(!r)return n;var o=JSON.parse(r);return Object.assign({},n,o)}}})),toDOM:function(e){var t=["h"+e.attrs.level,{},0];return e.attrs.collapseContent&&(t[1]["data-bangle-attrs"]=JSON.stringify({collapseContent:e.attrs.collapseContent}),t[1].class="bangle-heading-collapsed"),t}},markdown:{toMarkdown:function(e,t){e.write(e.repeat("#",t.attrs.level)+" "),e.renderInline(t),e.closeBlock(t)},parseMarkdown:{heading:{block:g,getAttrs:function(e){return{level:w(e.tag.slice(1))}}}}},options:{levels:n}}},m=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,r=void 0===n||n,i=t.keybindings,c=void 0===i?b:i;return function(e){var t,n=e.schema,i=e.specRegistry.options[g].levels,s=y(n),l=Object.fromEntries(i.map((function(e){return[c["toH"+e],Object(o.e)(s,{level:e})]})));return[c&&Object(u.b)(Object.assign({},l,(t={},t[c.moveUp]=Object(d.e)(s,"UP"),t[c.moveDown]=Object(d.e)(s,"DOWN"),t[c.jumpToStartOfHeading]=Object(d.d)(s),t[c.jumpToEndOfHeading]=Object(d.c)(s),t[c.emptyCopy]=Object(d.a)(s),t[c.emptyCut]=Object(d.b)(s),t[c.insertEmptyParaAbove]=S(),t[c.insertEmptyParaBelow]=A(),t[c.toggleCollapse]=E(),t)))].concat((r?i:[]).map((function(e){return Object(a.c)(new RegExp("^(#{1,"+e+"})\\s$"),s,(function(){return{level:e}}))})))}},h={toggleHeading:k,queryIsHeadingActive:j},b={toH1:"Shift-Ctrl-1",toH2:"Shift-Ctrl-2",toH3:"Shift-Ctrl-3",toH4:"Shift-Ctrl-4",toH5:"Shift-Ctrl-5",toH6:"Shift-Ctrl-6",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",jumpToStartOfHeading:f.a.mac?"Ctrl-a":"Ctrl-Home",jumpToEndOfHeading:f.a.mac?"Ctrl-e":"Ctrl-End",insertEmptyParaBelow:"Mod-Enter",toggleCollapse:null},g="heading",v=[1,2,3,4,5,6],y=function(e){return e.nodes[g]},O=function(e){var t=y(e.schema);return Object(l.e)(t)(e.selection)},w=function(e){return e=parseInt(e,10),Number.isNaN(e)?void 0:e};function k(e){return void 0===e&&(e=3),function(t,n,r){return j(e)(t)?Object(o.e)(t.schema.nodes.paragraph)(t,n,r):Object(o.e)(t.schema.nodes[g],{level:e})(t,n,r)}}function j(e){return function(t){var n=Object(l.e)(t.schema.nodes[g])(t.selection);if(!n)return!1;var r=n.node;return null==e||r.attrs.level===e}}function x(){return function(e){var t=Object(l.e)(e.schema.nodes[g])(e.selection);return!(!t||!q(t))&&Boolean(t.node.attrs.collapseContent)}}function C(){return function(e,t){var n=Object(l.e)(e.schema.nodes[g])(e.selection);if(!n||!q(n))return!1;if(x()(e,t))return!1;var r=function(e,t){var n=void 0,r=void 0,o=!1,a=function(t){return t.type===e.type&&t.attrs.level<=e.attrs.level};if(t.forEach((function(t,i,c){if(!o)if(t!==e){if(n){if(a(t))return void(o=!0);0!==t.content.size&&(r={index:c,offset:i,node:t})}}else n={index:c,offset:i,node:t}})),!r)return null;return{fragment:t.slice(n.offset+n.node.nodeSize,r.offset+r.node.nodeSize).content,start:n.offset,end:r.offset+r.node.nodeSize}}(n.node,e.doc);if(!r)return!1;var o=r.fragment,a=r.start,i=r.end,c=e.tr.replaceWith(a,i,e.schema.nodes[g].createChecked(Object.assign({},n.node.attrs,{collapseContent:o.toJSON()}),n.node.content));return e.selection instanceof s.TextSelection&&(c=c.setSelection(s.TextSelection.create(c.doc,e.selection.from))),t&&t(c),!0}}function M(){return function(e,t){var n=Object(l.e)(e.schema.nodes[g])(e.selection);if(!n||!q(n))return!1;if(!x()(e,t))return!1;var r=c.Fragment.fromJSON(e.schema,n.node.attrs.collapseContent),o=e.tr.replaceWith(n.pos,n.pos+n.node.nodeSize,c.Fragment.fromArray([e.schema.nodes[g].createChecked(Object.assign({},n.node.attrs,{collapseContent:null}),n.node.content)]).append(r));return e.selection instanceof s.TextSelection&&(o=o.setSelection(s.TextSelection.create(o.doc,e.selection.from))),t&&t(o),!0}}function S(){return Object(l.b)(O,(function(e,t,n){return Object(l.i)(e.schema.nodes.paragraph,"above",!1)(e,t,n)}))}function A(){return Object(l.b)(O,(function(e,t,n){return Object(l.i)(e.schema.nodes.paragraph,"below",!1)(e,t,n)}))}function E(){return function(e,t){var n=Object(l.e)(e.schema.nodes[g])(e.selection);return n&&1===n.depth?x()(e,t)?M()(e,t):C()(e,t):null}}function N(){return function(e,t){for(var n,o=D(e),a=e.tr,i=0,u=Object(r.a)(o);!(n=u()).done;){var d=n.value,l=d.node,f=d.pos,p=c.Fragment.fromJSON(e.schema,P(l.attrs.collapseContent));a=a.replaceWith(i+f,i+f+l.nodeSize,c.Fragment.fromArray([e.schema.nodes[g].createChecked(Object.assign({},l.attrs,{collapseContent:null}),l.content)]).append(p)),i+=p.size}return e.selection instanceof s.TextSelection&&(a=a.setSelection(s.TextSelection.create(a.doc,e.selection.from))),t&&t(a),!0}}function D(e){return Object(i.findChildren)(e.doc,(function(t){return t.type===e.schema.nodes[g]&&Boolean(t.attrs.collapseContent)}),!1)}function I(e){return Object(i.findChildren)(e.doc,(function(t){return t.type===e.schema.nodes[g]}),!1)}var P=function e(t){var n=[];return t.forEach((function(t){if("heading"===t.type&&t.attrs.collapseContent){var r=t.attrs.collapseContent;n.push(Object.assign({},t,{attrs:Object.assign({},t.attrs,{collapseContent:null})})),n.push.apply(n,e(r))}else n.push(t)})),n};function q(e){return 1===e.depth}},175:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleBold",(function(){return p})),n.d(t,"queryIsBoldActive",(function(){return m}));var r=n(144),o=n(146),a=n(152),i=n(153),c=n(143),s=function(e){void 0===e&&(e={});return{type:"mark",name:f,schema:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(e){return/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}}],toDOM:function(){return["strong",0]}},markdown:{toMarkdown:{open:"**",close:"**",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{strong:{mark:f}}}}},u=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,r=void 0===n||n,c=t.keybindings,s=void 0===c?l:c;return function(e){var t,n=function(e){return e.marks.bold}(e.schema);return[r&&Object(i.a)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,n),r&&Object(a.a)(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,n),s&&Object(o.b)((t={},t[s.toggleBold]=p(),t))]}},d={toggleBold:p,queryIsBoldActive:m},l={toggleBold:"Mod-b"},f="bold";function p(){return function(e,t,n){return Object(r.f)(e.schema.marks.bold)(e,t,n)}}function m(){return function(e){return Object(c.l)(e.schema.marks.bold)(e)}}},176:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return u})),n.d(t,"plugins",(function(){return d})),n.d(t,"commands",(function(){return l})),n.d(t,"defaultKeys",(function(){return f})),n.d(t,"toggleCode",(function(){return O})),n.d(t,"queryIsCodeActive",(function(){return w}));var r=n(144),o=n(152),a=n(153),i=n(143),c=n(146),s=n(142),u=function(e){void 0===e&&(e={});return{type:"mark",name:p,schema:{excludes:"_",parseDOM:[{tag:p}],toDOM:function(){return[p,0]}},markdown:{toMarkdown:{open:function(e,t,n,r){return v(n.child(r),-1)},close:function(e,t,n,r){return v(n.child(r-1),1)},escape:!1},parseMarkdown:{code_inline:{mark:p,noCloseToken:!0}}}}},d=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,s=void 0===n||n,u=t.escapeAtEdge,d=void 0===u||u,l=t.keybindings,p=void 0===l?f:l;return function(e){var t,n=function(e){return e.marks.code}(e.schema),u=[function(e){return e.selection.empty&&e.selection.$cursor}];return[s&&Object(a.a)(/(?:`)([^`]+)(?:`)/g,n),s&&Object(o.a)(/(?:`)([^`]+)(?:`)$/,n),p&&Object(c.b)((t={},t[p.toggleCode]=Object(r.f)(n),t)),d&&Object(c.b)({ArrowRight:Object(i.b)(u,b),ArrowLeft:Object(i.b)(u,g)})]}},l={toggleCode:O,queryIsCodeActive:w},f={toggleCode:"Mod-`"},p="code",m=function(e){return e.schema.marks.code};var h=function(e,t){if(t<0||t>e.doc.content.size)return!1;var n=m(e),r=e.doc.nodeAt(t);return!!r&&r.marks.some((function(e){return e.type===n}))};function b(e,t,n){var r=e.schema.marks.code,o=e.selection.$cursor,a=e.tr.storedMarks,i=y(e,r),c=e.doc.rangeHasMark(o.pos,o.pos,r),s=e.doc.rangeHasMark(o.pos,o.pos+1,r),u=!c&&s&&!(a&&a.length>0);if(!i&&u)return t&&t(e.tr.addStoredMark(r.create())),!0;var d=!(c||s||a&&0===a.length);return!(!i||!d)&&(t&&t(e.tr.removeStoredMark(r)),!0)}function g(e,t,n){var r=m(e),o=y(e,r),a=e.selection.$cursor,i=e.tr.storedMarks,c=h(e,a.pos),u=h(e,a.pos-1),d=h(e,a.pos-2),l=c&&!u&&Array.isArray(i),f=u&&!d&&(null===i||Array.isArray(i)&&!!i.length),p=(l&&Array.isArray(i)&&!i.length||!l&&null===i)&&!u&&d,b=!c&&u&&Array.isArray(i)&&!i.length;if(!o&&p){var g=e.tr.setSelection(s.Selection.near(e.doc.resolve(a.pos-1)));return t&&t(g.removeStoredMark(r)),!0}if(!o&&b)return t&&t(e.tr.addStoredMark(r.create())),!0;if(o&&f){var v=e.tr.setSelection(s.Selection.near(e.doc.resolve(a.pos-1)));return t&&t(v.addStoredMark(r.create())),!0}var O=0===a.index(a.depth-1);return o&&(l||!a.nodeBefore&&O)?(t&&t(e.tr.removeStoredMark(r)),!0):void 0}function v(e,t){var n,r=/`+/g,o=0;if(e.isText)for(;n=r.exec(e.text);)o=Math.max(o,n[0].length);for(var a=o>0&&t>0?" `":"`",i=0;i<o;i++)a+="`";return o>0&&t<0&&(a+=" "),a}function y(e,t){var n=e.selection,r=n.from,o=n.to;if(n.empty)return!!t.isInSet(e.tr.storedMarks||e.selection.$from.marks());var a=!1;return e.doc.nodesBetween(r,o,(function(e){a=a||t.isInSet(e.marks)})),a}function O(){return function(e,t,n){return Object(r.f)(e.schema.marks.code)(e,t,n)}}function w(){return function(e){return Object(i.l)(e.schema.marks.code)(e)}}},177:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleItalic",(function(){return p})),n.d(t,"queryIsItalicActive",(function(){return m}));var r=n(152),o=n(153),a=n(144),i=n(143),c=n(146),s=function(e){void 0===e&&(e={});return{type:"mark",name:f,schema:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},markdown:{toMarkdown:{open:"_",close:"_",mixable:!0,expelEnclosingWhitespace:!0},parseMarkdown:{em:{mark:f}}}}},u=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?l:t;return function(e){var t,i=function(e){return e.marks[f]}(e.schema);return[Object(o.a)(/_([^_]+)_/g,i),Object(o.a)(/\*([^*]+)\*/g,i),Object(r.a)(/(?:^|[^_])(_([^_]+)_)$/,i),Object(r.a)(/(?:^|[^*])(\*([^*]+)\*)$/,i),n&&Object(c.b)((t={},t[n.toggleItalic]=Object(a.f)(i),t))]}},d={toggleItalic:p,queryIsItalicActive:m},l={toggleItalic:"Mod-i"},f="italic";function p(){return function(e,t,n){return Object(a.f)(e.schema.marks[f])(e,t,n)}}function m(){return function(e){return Object(i.l)(e.schema.marks[f])(e)}}},178:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"convertToParagraph",(function(){return m})),n.d(t,"queryIsTopLevelParagraph",(function(){return h})),n.d(t,"queryIsParagraph",(function(){return b})),n.d(t,"insertEmptyParagraphAbove",(function(){return g})),n.d(t,"insertEmptyParagraphBelow",(function(){return v})),n.d(t,"jumpToStartOfParagraph",(function(){return y})),n.d(t,"jumpToEndOfParagraph",(function(){return O}));var r=n(144),o=(n(142),n(143)),a=n(154),i=n(150),c=n(151),s=function(e){void 0===e&&(e={});return{type:"node",name:f,schema:{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},markdown:{toMarkdown:function(e,t){e.renderInline(t),e.closeBlock(t)},parseMarkdown:{paragraph:{block:"paragraph"}}}}},u=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?l:t;return function(e){var t,r=e.schema,c=p(r),s=Object(i.f)(c,r.nodes.doc);return[n&&Object(a.b)((t={},t[n.convertToParagraph]=m(),t[n.moveUp]=Object(o.b)(s,Object(i.e)(c,"UP")),t[n.moveDown]=Object(o.b)(s,Object(i.e)(c,"DOWN")),t[n.jumpToStartOfParagraph]=Object(i.d)(c),t[n.jumpToEndOfParagraph]=Object(i.c)(c),t[n.emptyCopy]=Object(o.b)(s,Object(i.a)(c)),t[n.emptyCut]=Object(o.b)(s,Object(i.b)(c)),t[n.insertEmptyParaAbove]=Object(o.b)(s,Object(o.i)(c,"above")),t[n.insertEmptyParaBelow]=Object(o.b)(s,Object(o.i)(c,"below")),t))]}},d={convertToParagraph:m,jumpToStartOfParagraph:y,jumpToEndOfParagraph:O,queryIsParagraph:b,queryIsTopLevelParagraph:h,insertEmptyParagraphAbove:g,insertEmptyParagraphBelow:v},l={jumpToEndOfParagraph:c.a.mac?"Ctrl-e":"Ctrl-End",jumpToStartOfParagraph:c.a.mac?"Ctrl-a":"Ctrl-Home",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter",convertToParagraph:"Ctrl-Shift-0"},f="paragraph",p=function(e){return e.nodes[f]};function m(){return function(e,t){return Object(r.e)(p(e.schema))(e,t)}}function h(){return function(e){var t=p(e.schema);return Object(i.f)(t,e.schema.nodes.doc)(e)}}function b(){return function(e){var t=p(e.schema);return Boolean(Object(o.e)(t)(e.selection))}}function g(){return function(e,t,n){var r=p(e.schema);return Object(o.b)(Object(i.f)(r,e.schema.nodes.doc),Object(o.i)(r,"above"))(e,t,n)}}function v(){return function(e,t,n){var r=p(e.schema);return Object(o.b)(Object(i.f)(r,e.schema.nodes.doc),Object(o.i)(r,"below"))(e,t,n)}}function y(){return function(e,t){var n=p(e.schema);return Object(i.d)(n)(e,t)}}function O(){return function(e,t){var n=p(e.schema);return Object(i.c)(n)(e,t)}}},179:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"queryIsBlockquoteActive",(function(){return m})),n.d(t,"wrapInBlockquote",(function(){return h})),n.d(t,"insertEmptyParaAbove",(function(){return b})),n.d(t,"insertEmptyParaBelow",(function(){return g}));var r=n(148),o=n(144),a=n(146),i=n(150),c=n(143),s=function(e){void 0===e&&(e={});return{type:"node",name:f,schema:{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},markdown:{toMarkdown:function(e,t){e.wrapBlock("> ",null,t,(function(){return e.renderContent(t)}))},parseMarkdown:{blockquote:{block:f}}}}},u=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,o=void 0===n||n,c=t.keybindings,s=void 0===c?l:c;return function(e){var t,n=e.schema,c=p(n);return[o&&Object(r.e)(/^\s*>\s$/,c),s&&Object(a.b)((t={},t[s.wrapIn]=h(),t[s.moveUp]=Object(i.e)(c,"UP"),t[s.moveDown]=Object(i.e)(c,"DOWN"),t[s.emptyCopy]=Object(i.a)(c),t[s.emptyCut]=Object(i.b)(c),t[s.insertEmptyParaAbove]=b(),t[s.insertEmptyParaBelow]=g(),t))]}},d={queryIsBlockquoteActive:m,wrapInBlockquote:h},l={wrapIn:"Ctrl-ArrowRight",moveDown:"Alt-ArrowDown",moveUp:"Alt-ArrowUp",emptyCopy:"Mod-c",emptyCut:"Mod-x",insertEmptyParaAbove:"Mod-Shift-Enter",insertEmptyParaBelow:"Mod-Enter"},f="blockquote",p=function(e){return e.nodes[f]};function m(){return function(e){var t=p(e.schema);return Boolean(Object(c.e)(t)(e.selection))}}function h(){return Object(c.b)((function(e){return!m()(e)}),(function(e,t,n){var r=p(e.schema);return Object(o.g)(r)(e,t,n)}))}function b(){var e=m();return function(t,n,r){return Object(c.b)(e,Object(c.i)(t.schema.nodes.paragraph,"above",!0))(t,n,r)}}function g(){var e=m();return function(t,n,r){return Object(c.b)(e,Object(c.i)(t.schema.nodes.paragraph,"below",!0))(t,n,r)}}},180:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return d})),n.d(t,"plugins",(function(){return l})),n.d(t,"commands",(function(){return f})),n.d(t,"defaultKeys",(function(){return p})),n.d(t,"toggleBulletList",(function(){return h})),n.d(t,"toggleTodoList",(function(){return b})),n.d(t,"queryIsBulletListActive",(function(){return g})),n.d(t,"queryIsTodoListActive",(function(){return v}));var r=n(146),o=n(148),a=n(150),i=n(171),c=n(144),s=n(169),u=n(184),d=function(e){void 0===e&&(e={});return{type:"node",name:m,schema:{content:"listItem+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]},attrs:{tight:{default:!1}}},markdown:{toMarkdown:function(e,t){e.renderList(t,"  ",(function(){return"- "}))},parseMarkdown:{bullet_list:{block:m,getAttrs:function(e,t,n){return{tight:Object(u.a)(t,n)}}}}}}},l=function(e){var t=void 0===e?{}:e,n=t.markdownShortcut,a=void 0===n||n,i=t.todoMarkdownShortcut,c=void 0===i||i,u=t.keybindings,d=void 0===u?p:u;return function(e){var t,n=e.schema,i=function(e){return e.nodes[m]}(n);return[d&&Object(r.b)((t={},t[d.toggle]=h(),t[d.toggleTodo]=b(),t)),a&&Object(o.e)(/^\s*([-+*])\s$/,i,void 0,(function(e,t){return!t.lastChild||!Object(s.a)(t.lastChild,n)})),c&&Object(s.f)(/^\s*(\[ \])\s$/,{todoChecked:!1})]}},f={toggleBulletList:h,queryIsBulletListActive:g},p={toggle:"Shift-Ctrl-8",toggleTodo:"Shift-Ctrl-7"},m="bulletList";function h(){return Object(c.c)(s.b,(function(e,t,n){return Object(i.f)(e.schema.nodes.bulletList,e.schema.nodes.listItem)(e,t,n)}))}function b(){return Object(c.c)(s.d,(function(e,t,n){return Object(i.f)(e.schema.nodes.bulletList,e.schema.nodes.listItem,!0)(e,t,n)}))}function g(){return function(e){var t=e.schema;return Object(a.f)(t.nodes.listItem,[t.nodes.bulletList])(e)}}function v(){return function(e){var t=e.schema;return Object(a.f)(t.nodes.listItem,[t.nodes.bulletList])(e)&&Object(s.a)(e.selection.$from.node(-1),t)}}},181:function(e,t,n){"use strict";n.r(t),n.d(t,"spec",(function(){return s})),n.d(t,"plugins",(function(){return u})),n.d(t,"commands",(function(){return d})),n.d(t,"defaultKeys",(function(){return l})),n.d(t,"toggleOrderedList",(function(){return p})),n.d(t,"queryIsOrderedListActive",(function(){return m}));var r=n(171),o=n(148),a=n(146),i=n(150),c=n(184),s=function(e){void 0===e&&(e={});return{type:"node",name:f,schema:{attrs:{order:{default:1},tight:{default:!1}},content:"listItem+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1===e.attrs.order?["ol",0]:["ol",{start:e.attrs.order},0]}},markdown:{toMarkdown:function(e,t){var n=t.attrs.order||1,r=String(n+t.childCount-1).length,o=e.repeat(" ",r+2);e.renderList(t,o,(function(t){var o=String(n+t);return e.repeat(" ",r-o.length)+o+". "}))},parseMarkdown:{ordered_list:{block:f,getAttrs:function(e,t,n){return{tight:Object(c.a)(t,n),order:+e.attrGet("start")||1}}}}}}},u=function(e){var t=(void 0===e?{}:e).keybindings,n=void 0===t?l:t;return function(e){var t,i=function(e){return e.nodes[f]}(e.schema);return[Object(o.e)(/^(1)[\.\)] $/,i,(function(e){return{order:+e[1]}}),(function(e,t){return t.childCount+t.attrs.order===+e[1]})),n&&Object(a.b)((t={},t[n.toggle]=Object(r.f)(i),t))]}},d={toggleOrderedList:p,queryIsOrderedListActive:m},l={toggle:"Shift-Ctrl-9"},f="orderedList";function p(){return function(e,t,n){return Object(r.f)(e.schema.nodes.orderedList,e.schema.nodes.listItem)(e,t,n)}}function m(){return function(e){var t=e.schema;return Object(i.f)(t.nodes.listItem,[t.nodes[f]])(e)}}},182:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(145),o=n(149);function a(){var e=new WeakMap;return{get:function(t,n){i(t);var o=e.get(t);if(!o||!o[n]||!n)throw Object(r.b)("There is no key named "+n+" associated with the pluginKey =",t,"\nPlease make sure you are passing the pluginKey correctly to your components."),new Error("Cannot find the pluginKey '"+n+"'");return e.get(t)[n]},create:function(t,n){i(t);var r=new o.c(n);if(e.has(t)){var a=e.get(t);if(a[n])return a[n];a[n]=r}else{var c;e.set(t,((c={})[n]=r,c))}return r}}}function i(e){if(!(e instanceof o.c))throw Object(r.b)("The key is not a valid pluginKey",e),new Error("Please pass a valid plugin key")}},183:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(4),o=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t}(n(142).Selection)},184:function(e,t,n){"use strict";function r(e,t){for(;++t<e.length;)if("list_item_open"!==e[t].type)return e[t].hidden;return!1}n.d(t,"a",(function(){return r}))},185:function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(198),i=n(173),c=n(54),s=n.n(c),u=37,d=39;t.a=function(e){var t=e.lazy,n=e.block,c=e.children,l=e.defaultValue,f=e.values,p=e.groupId,m=e.className,h=Object(a.a)(),b=h.tabGroupChoices,g=h.setTabGroupChoices,v=Object(r.useState)(l),y=v[0],O=v[1];if(null!=p){var w=b[p];null!=w&&w!==y&&f.some((function(e){return e.value===w}))&&O(w)}var k=function(e){O(e),null!=p&&g(p,e)},j=[];return o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(i.a)("tabs",{"tabs--block":n},m)},f.map((function(e){var t=e.value,n=e.label;return o.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":y===t,className:Object(i.a)("tabs__item",s.a.tabItem,{"tabs__item--active":y===t}),key:t,ref:function(e){return j.push(e)},onKeyDown:function(e){!function(e,t,n){switch(n.keyCode){case d:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case u:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(j,e.target,e)},onFocus:function(){return k(t)},onClick:function(){k(t)}},n)}))),t?Object(r.cloneElement)(c.filter((function(e){return e.props.value===y}))[0],{className:"margin-vert--md"}):o.a.createElement("div",{className:"margin-vert--md"},c.map((function(e,t){return Object(r.cloneElement)(e,{key:t,hidden:e.props.value!==y})}))))}},186:function(e,t,n){"use strict";var r=n(3),o=n(0),a=n.n(o);t.a=function(e){var t=e.children,n=e.hidden,o=e.className;return a.a.createElement("div",Object(r.a)({role:"tabpanel"},{hidden:n,className:o}),t)}},191:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return x})),n.d(t,"c",(function(){return S})),n.d(t,"e",(function(){return A})),n.d(t,"d",(function(){return E}));var r=n(0),o=n.n(r),a=n(23),i=n.n(a),c=n(1),s=n.n(c),u=n(165),d=n(156),l=n(161),f=n(4),p=n(145),m=n(147),h=n(210),b=function(){},g=function(e){function t(t){var n;return(n=e.call(this,t)||this).update=function(){n.setState((function(e,t){return{nodeViewProps:t.nodeView.getNodeViewProps()}}))},n.attachToContentDOM=function(e){if(e){var t=n.props.nodeView.contentDOM;e.contains(t)||(t.parentNode&&t.parentNode.removeChild(t),e.appendChild(t))}},t.nodeViewUpdateStore.set(t.nodeView,n.update),n.state={nodeViewProps:n.props.nodeView.getNodeViewProps()},n}Object(f.a)(t,e);var n=t.prototype;return n.getChildren=function(){return this.props.nodeView.contentDOM?this.state.nodeViewProps.node.isInline?o.a.createElement("span",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):o.a.createElement("div",{className:"bangle-nv-child-container",ref:this.attachToContentDOM}):null},n.render=function(){b("react rendering",u.a.get(this.props.nodeView));var e=this.props.renderNodeViews(Object.assign({},this.state.nodeViewProps,{children:this.getChildren()}));if(!e)throw Object(p.b)("renderNodeView prop must return a react element for the node",this.state.nodeViewProps.node),new Error('renderNodeView must handle rendering for node of type "'+this.state.nodeViewProps.node.type.name+'"');return e},t}(o.a.PureComponent);g.propTypes={nodeView:s.a.object.isRequired,renderNodeViews:s.a.func.isRequired,nodeViewUpdateStore:s.a.instanceOf(WeakMap).isRequired};var v={selected:s.a.bool.isRequired,node:s.a.instanceOf(m.Node).isRequired,view:s.a.instanceOf(h.c).isRequired,getPos:s.a.func.isRequired,decorations:s.a.object.isRequired,attrs:s.a.object.isRequired,updateAttrs:s.a.func.isRequired},y=(Object.assign({},v,{children:s.a.oneOfType([s.a.element,s.a.arrayOf(s.a.element)]).isRequired}),function(){}),O=new WeakMap,w=function(e){return{create:function(t,n){y("create",u.a.get(t)),e((function(e){return[].concat(e,[t])}))},update:function(e,t){y("update",u.a.get(e));var n=O.get(e);n&&n()},destroy:function(t){y("destroy",u.a.get(t)),e((function(e){return e.filter((function(e){return e!==t}))}))}}};var k=function(){},j=o.a.createContext();function x(e){var t=e.id,n=e.state,a=e.children,c=e.focusOnInit,s=void 0===c||c,f=e.pmViewOpts,p=e.renderNodeViews,m=e.className,h=e.style,b=e.onReady,v=void 0===b?function(){}:b,y=Object(r.useRef)(),k=Object(r.useRef)(v),x=Object(r.useRef)({state:n,focusOnInit:s,pmViewOpts:f}),M=Object(r.useState)([]),S=M[0],A=M[1],E=Object(r.useState)(),N=E[0],D=E[1];return Object(r.useEffect)((function(){var e=!1;Object(l.b)(y.current,w((function(t){e||A((function(e){return t(e)}))})));var t=new d.a(y.current,x.current);return t.view._updatePluginWatcher=C(t),k.current(t),D(t),function(){e=!0,t.destroy()}}),[]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{ref:y,id:t,className:m,style:h}),S.map((function(e){return i.a.createPortal(o.a.createElement(g,{debugKey:u.a.get(e),nodeViewUpdateStore:O,nodeView:e,renderNodeViews:p}),e.containerDOM,u.a.get(e))})),N?o.a.createElement(j.Provider,{value:N.view},a):null)}var C=function(e){return function(t,n){if(void 0===n&&(n=!1),!e.destroyed){var r=e.view.state,o=n?r.plugins.filter((function(e){return e!==t})):[].concat(r.plugins,[t]);r=r.reconfigure({plugins:o}),k("Adding watching to existing state",t),e.view.updateState(r)}}};x.propTypes={id:s.a.string,renderNodeViews:s.a.func,onReady:s.a.func,children:s.a.oneOfType([s.a.element,s.a.arrayOf(s.a.element)]),state:s.a.instanceOf(d.b).isRequired,pmViewOpts:s.a.object,className:s.a.string,style:s.a.object};n(163),n(164);var M=function(){};function S(e){if(e.plugins&&"function"!=typeof e.plugins)throw new Error("plugins error: plugins must be a function");return Object(r.useState)((function(){return new d.b(e)}))[0]}function A(e,t){void 0===t&&(t=!1);var n=E(),o=Object(r.useState)(e.getState(n.state)),a=o[0],i=o[1];return Object(r.useEffect)((function(){M("Setup plugin",e);var r=i;t&&(r=Object(p.i)(i));var o=function(e,t){return new d.d({key:new d.e("withPluginState_"+e.key),view:function(){return{update:function(n,r){var o=n.state;if(r!==o){var a=e.getState(o);a!==e.getState(r)&&t(a)}}}}})}(e,r);return n._updatePluginWatcher(o),function(){t&&r.cancel(),n._updatePluginWatcher(o,!0)}}),[n,e,t]),a}function E(){return Object(r.useContext)(j)}},196:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return b}));var r=n(4),o=n(0),a=n.n(o),i=n(1),c=n.n(i),s=n(199),u=n(185),d=n(186),l=n(200);function f(e){var t=e.filePath,n=e.language,r=e.createEditor,i=e.defaultTab,c=void 0===i?"example":i,s=e.onEditorReady,u=void 0===s?function(){}:s,d=e.SideCar,l=Object(o.useRef)(r),f=Object(o.useState)(!1),h=f[0],b=f[1],g=Object(o.useCallback)((function(){return a.a.createElement(p,{createEditor:l.current,onReady:b})}),[l,b]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(m,{filePath:t,language:n,component:g,defaultTab:c}),h?u(h):null,h&&d?a.a.createElement(d,{editor:h}):null)}function p(e){var t=e.createEditor,n=e.onReady,r=Object(o.useRef)();return Object(o.useEffect)((function(){var e=t(r.current);return n(e),function(){e.destroy()}}),[t,n]),a.a.createElement("div",{ref:r})}function m(e){var t=e.filePath,n=e.language,r=e.component,o=e.defaultTab,i=void 0===o?"example":o;return a.a.createElement(g,null,a.a.createElement(u.a,{defaultValue:i,values:[{label:"Example",value:"example"},{label:"Source code",value:"src"}]},a.a.createElement(d.a,{value:"example"},a.a.createElement(l.a,null,r)),a.a.createElement(d.a,{value:"src"},a.a.createElement(h,{filePath:t,language:n}))))}function h(e){var t=e.filePath,n=e.language,r=void 0===n?"js":n,i=Object(o.useState)(),c=i[0],u=i[1];return Object(o.useEffect)((function(){var e=!1;return function(e){return fetch(e).then((function(e){return e.text()}))}(t).then((function(t){e||u(t)})).catch((function(n){console.error(n),e||u("Error: Could not load source code at "+t)})),function(){e=!0}}),[u,t]),c?a.a.createElement(s.a,{className:"language-"+r},c):"loading..."}function b(e){var t="",n="";return e.split(/>\s*</).forEach((function(e){e.match(/^\/\w/)&&(n=n.substring("  ".length)),t+=n+"<"+e+">\r\n",e.match(/^<?\w[^>]*[^\/]$/)&&(n+="  ")})),t.substring(1,t.length-3)}m.propTypes={component:c.a.func.isRequired,language:c.a.string,filePath:c.a.string.isRequired};var g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={hasError:!1},t}return Object(r.a)(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.render=function(){return this.state.hasError?a.a.createElement("div",{style:{margin:"2rem 2rem",padding:"1rem 2rem",backgroundColor:"red",color:"white"}},"Whoops! There was an error loading this example, please file a github issue to report it"):this.props.children},t}(a.a.PureComponent)},210:function(e,t,n){"use strict";var r=n(188);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.b})),n.d(t,"c",(function(){return r.c}))}}]);